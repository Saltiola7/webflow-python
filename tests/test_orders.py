# This file was auto-generated by Fern from our API Definition.

from webflow import Webflow
from webflow import AsyncWebflow
import typing
from .utilities import validate_response


async def test_list_(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "orders": [
            {
                "orderId": "7c1-9fd",
                "status": "unfulfilled",
                "comment": "Customer requested gift wrapping and a personalized note saying: Happy Birthday, Ford! ðŸŽ‰ Please ensure the item is packed with extra bubble wrap for safe transit.",
                "orderComment": 'Please gift wrap with a personal note saying "Happy Birthday, Ford! ðŸŽ‰',
                "acceptedOn": "2024-04-10T13:16:21Z",
                "fulfilledOn": "2018-12-03T22:06:15Z",
                "refundedOn": "2018-12-03T22:06:15Z",
                "disputedOn": "2018-12-03T22:06:15Z",
                "disputeUpdatedOn": "2018-12-03T22:06:15Z",
                "disputeLastStatus": "warning_needs_response",
                "customerPaid": {"unit": "USD", "value": "5892", "string": " 211.55 USD"},
                "netAmount": {"unit": "USD", "value": "5892", "string": " 200.89 USD"},
                "applicationFee": {"unit": "USD", "value": "5892", "string": " 4.23 USD"},
                "allAddresses": [
                    {
                        "type": "billing",
                        "addressee": "Arthur Dent",
                        "line1": "20 W 34th St",
                        "line2": "Empire State Building",
                        "city": "New York",
                        "state": "New York",
                        "country": "US",
                        "postalCode": "10118",
                    },
                    {
                        "type": "shipping",
                        "addressee": "Arthur Dent",
                        "line1": "20 W 34th St",
                        "line2": "Empire State Building",
                        "city": "New York",
                        "state": "New York",
                        "country": "US",
                        "postalCode": "10118",
                    },
                ],
                "shippingAddress": {
                    "type": "shipping",
                    "japanType": "kanji",
                    "addressee": "Arthur Dent",
                    "line1": "20 W 34th St",
                    "line2": "Empire State Building",
                    "city": "New York",
                    "state": "New York",
                    "country": "US",
                    "postalCode": "10118",
                },
                "billingAddress": {
                    "type": "billing",
                    "addressee": "Arthur Dent",
                    "line1": "20 W 34th St",
                    "line2": "Empire State Building",
                    "city": "New York",
                    "state": "New York",
                    "country": "US",
                    "postalCode": "10118",
                },
                "shippingProvider": "Shipping Company, Co.",
                "shippingTracking": "tr00000000002",
                "shippingTrackingURL": "https://www.shippingcompany.com/tracking/tr00000000002",
                "customerInfo": {"fullName": "Arthur Dent", "email": "arthur.dent@example.com"},
                "purchasedItems": [
                    {
                        "count": 2,
                        "rowTotal": {"unit": "USD", "value": "5892", "string": " 111.22 USD"},
                        "productId": "66072fb61b89448912e26791",
                        "productName": "Luxurious Fresh Ball",
                        "productSlug": "luxurious-fresh-ball",
                        "variantId": "66072fb71b89448912e2683f",
                        "variantName": "Luxurious Fresh Ball Generic: Bronze, Practical: Plastic",
                        "variantSlug": "luxurious-fresh-ball-generic-bronze-practical-plastic",
                        "variantSKU": "luxurious-fresh-ball-generic-bronze-practical-plastic",
                        "variantImage": {
                            "url": "https://d1otoma47x30pg.cloudfront.net/66072f39417a2a35b2589cc7/66072fb51b89448912e2672c_image14.jpeg"
                        },
                        "variantPrice": {"unit": "USD", "value": "5892", "string": " 55.61 USD"},
                        "weight": 11,
                        "width": 82,
                        "height": 70,
                        "length": 9,
                    },
                    {
                        "count": 1,
                        "rowTotal": {"unit": "USD", "value": "5892", "string": " 83.09 USD"},
                        "productId": "66072fb61b89448912e2678b",
                        "productName": "Incredible Bronze Towels",
                        "productSlug": "incredible-bronze-towels",
                        "variantId": "66072fb71b89448912e2681e",
                        "variantName": "Incredible Bronze Towels Sleek: Frozen, Incredible: Metal",
                        "variantSlug": "incredible-bronze-towels-sleek-frozen-incredible-metal",
                        "variantSKU": "incredible-bronze-towels-sleek-frozen-incredible-metal",
                        "variantImage": {
                            "url": "https://d1otoma47x30pg.cloudfront.net/66072f39417a2a35b2589cc7/66072fb51b89448912e26729_image16.jpeg"
                        },
                        "variantPrice": {"unit": "USD", "value": "5892", "string": " 83.09 USD"},
                        "width": 19,
                        "height": 72,
                        "length": 18,
                    },
                ],
                "purchasedItemsCount": 3,
                "stripeDetails": {
                    "paymentMethod": "pm_1P410gJYFi4lcbXWbeKghqjK",
                    "paymentIntentId": "pi_3P410iJYFi4lcbXW0EKKgcVg",
                    "customerId": "cus_Ptod8KJBiiPgnH",
                    "chargeId": "ch_3P410iJYFi4lcbXW0DxUkzCH",
                },
                "stripeCard": {
                    "last4": "4242",
                    "brand": "Visa",
                    "ownerName": "Arthur Dent",
                    "expires": {"year": 2025, "month": 4},
                },
                "paypalDetails": {
                    "orderId": "1a2b3c4d5e6f7g8h9i0j",
                    "payerId": "9k8j7i6h5g4f3e2d1c0b",
                    "captureId": "qwe123rty456uio789p",
                    "refundId": "abcde12345fghij67890",
                    "refundReason": "Customer requested refund",
                    "disputeId": "zxcvbnm987poiuytrewq",
                },
                "customData": [{"key": "value"}],
                "metadata": {"isBuyNow": False},
                "isCustomerDeleted": False,
                "isShippingRequired": False,
                "hasDownloads": False,
                "paymentProcessor": "stripe",
                "totals": {
                    "extras": [
                        {
                            "type": "tax",
                            "name": "State Taxes",
                            "description": "CA Taxes (6.25%)",
                            "price": {"unit": "USD", "value": "5892", "string": "3.44"},
                        }
                    ]
                },
                "downloadFiles": [
                    {
                        "id": "5e9a5eba75e0ac242e1b6f64",
                        "name": "The modern web design process - Webflow Ebook.pdf",
                        "url": "https://webflow.com/dashboard/download-digital-product?payload=5d93ba5e38c6b0160ab711d3;e7634a;5eb1aac72912ec06f561278c;5e9a5eba75e0ac242e1b6f63:ka2nehxy:4a1ee0a632feaab94294350087215ed89533f2f530903e3b933b638940e921aa",
                    }
                ],
            },
            {
                "orderId": "fc7-128",
                "status": "refunded",
                "comment": "Example comment to myself",
                "orderComment": "",
                "acceptedOn": "2024-03-29T21:29:21Z",
                "fulfilledOn": "2018-12-03T22:06:15Z",
                "refundedOn": "2024-04-08T18:25:04Z",
                "disputedOn": "2018-12-03T22:06:15Z",
                "disputeUpdatedOn": "2018-12-03T22:06:15Z",
                "disputeLastStatus": "warning_needs_response",
                "customerPaid": {"unit": "USD", "value": "5892", "string": " 118.73 USD"},
                "netAmount": {"unit": "USD", "value": "5892", "string": " 112.62 USD"},
                "applicationFee": {"unit": "USD", "value": "5892", "string": " 2.37 USD"},
                "allAddresses": [
                    {
                        "type": "billing",
                        "addressee": "Arthur Dent",
                        "line1": "20 W 34th St",
                        "line2": "Empire State Building",
                        "city": "New York",
                        "state": "New York",
                        "country": "US",
                        "postalCode": "10118",
                    },
                    {
                        "type": "shipping",
                        "addressee": "Arthur Dent",
                        "line1": "20 W 34th St",
                        "line2": "Empire State Building",
                        "city": "New York",
                        "state": "New York",
                        "country": "US",
                        "postalCode": "10118",
                    },
                ],
                "shippingAddress": {
                    "type": "shipping",
                    "addressee": "Arthur Dent",
                    "line1": "20 W 34th St",
                    "line2": "Empire State Building",
                    "city": "New York",
                    "state": "New York",
                    "country": "US",
                    "postalCode": "10118",
                },
                "billingAddress": {
                    "type": "billing",
                    "addressee": "Arthur Dent",
                    "line1": "20 W 34th St",
                    "line2": "Empire State Building",
                    "city": "New York",
                    "state": "New York",
                    "country": "US",
                    "postalCode": "10118",
                },
                "shippingProvider": "Shipping Company, Co.",
                "shippingTracking": "tr00000000001",
                "shippingTrackingURL": "https://www.shippingcompany.com/tracking/tr00000000001",
                "customerInfo": {"fullName": "Arthur Dent", "email": "arthur.dent@example.com"},
                "purchasedItems": [
                    {
                        "count": 1,
                        "rowTotal": {"unit": "USD", "value": "5892", "string": " 55.61 USD"},
                        "productId": "66072fb61b89448912e26791",
                        "productName": "Luxurious Fresh Ball",
                        "productSlug": "luxurious-fresh-ball",
                        "variantId": "66072fb71b89448912e2683f",
                        "variantName": "Luxurious Fresh Ball Generic: Bronze, Practical: Plastic",
                        "variantSlug": "luxurious-fresh-ball-generic-bronze-practical-plastic",
                        "variantSKU": "luxurious-fresh-ball-generic-bronze-practical-plastic",
                        "variantImage": {
                            "url": "https://d1otoma47x30pg.cloudfront.net/66072f39417a2a35b2589cc7/66072fb51b89448912e2672c_image14.jpeg"
                        },
                        "variantPrice": {"unit": "USD", "value": "5892", "string": " 55.61 USD"},
                        "weight": 11,
                        "width": 82,
                        "height": 70,
                        "length": 9,
                    },
                    {
                        "count": 1,
                        "rowTotal": {"unit": "USD", "value": "5892", "string": " 53.44 USD"},
                        "productId": "66072fb61b89448912e26799",
                        "productName": "Recycled Steel Gloves",
                        "productSlug": "recycled-steel-gloves",
                        "variantId": "66072fb91b89448912e26ab9",
                        "variantName": "Recycled Steel Gloves Electronic: Granite, Handcrafted: grey",
                        "variantSlug": "recycled-steel-gloves-electronic-granite-handcrafted-grey",
                        "variantSKU": "recycled-steel-gloves-electronic-granite-handcrafted-grey",
                        "variantImage": {
                            "url": "https://d1otoma47x30pg.cloudfront.net/66072f39417a2a35b2589cc7/66072fb51b89448912e2671e_image2.jpeg"
                        },
                        "variantPrice": {"unit": "USD", "value": "5892", "string": " 53.44 USD"},
                        "weight": 38,
                        "width": 76,
                        "height": 85,
                        "length": 40,
                    },
                ],
                "purchasedItemsCount": 2,
                "stripeDetails": {
                    "paymentMethod": "pm_1OzmzBJYFi4lcbXWHKNdXU7j",
                    "paymentIntentId": "pi_3OzmzDJYFi4lcbXW1hTBW6ft",
                    "customerId": "cus_PpRsNHwWdUoRKR",
                    "chargeId": "ch_3OzmzDJYFi4lcbXW1ndkkrH2",
                    "refundId": "re_3OzmzDJYFi4lcbXW1kFAmlBk",
                    "refundReason": "fraudulent",
                },
                "stripeCard": {
                    "last4": "4242",
                    "brand": "Visa",
                    "ownerName": "Arthur Dent",
                    "expires": {"year": 2024, "month": 4},
                },
                "paypalDetails": {
                    "orderId": "1a2b3c4d5e6f7g8h9i0j",
                    "payerId": "9k8j7i6h5g4f3e2d1c0b",
                    "captureId": "qwe123rty456uio789p",
                    "refundId": "abcde12345fghij67890",
                    "refundReason": "Customer requested refund",
                    "disputeId": "zxcvbnm987poiuytrewq",
                },
                "customData": [{"key": "value"}],
                "metadata": {"isBuyNow": False},
                "isCustomerDeleted": False,
                "isShippingRequired": True,
                "hasDownloads": False,
                "paymentProcessor": "stripe",
                "totals": {
                    "subtotal": {"unit": "USD", "value": "5892", "string": " 109.05 USD"},
                    "extras": [
                        {
                            "type": "tax",
                            "name": "State Taxes",
                            "description": "NY Taxes (4.00%)",
                            "price": {"unit": "USD", "value": "5892", "string": " 4.36 USD"},
                        },
                        {
                            "type": "tax",
                            "name": "City Taxes",
                            "description": "NEW YORK Taxes (4.88%)",
                            "price": {"unit": "USD", "value": "5892", "string": " 5.32 USD"},
                        },
                        {
                            "type": "shipping",
                            "name": "Flat",
                            "description": "",
                            "price": {"unit": "USD", "value": "5892", "string": " 0.00 USD"},
                        },
                    ],
                    "total": {"unit": "USD", "value": "5892", "string": " 118.73 USD"},
                },
                "downloadFiles": [
                    {
                        "id": "5e9a5eba75e0ac242e1b6f64",
                        "name": "New product guide",
                        "url": "https://webflow.com/dashboard/download-digital-product?payload=5d93ba5e38c6b0160ab711d3;e7634a;5eb1aac72912ec06f561278c;5e9a5eba75e0ac242e1b6f63:ka2nehxy:4a1ee0a632feaab94294350087215ed89533f2f530903e3b933b638940e921aa",
                    }
                ],
            },
        ],
        "pagination": {"limit": 100, "offset": 0, "total": 2},
    }
    expected_types: typing.Any = {
        "orders": (
            "list",
            {
                0: {
                    "orderId": None,
                    "status": None,
                    "comment": None,
                    "orderComment": None,
                    "acceptedOn": "datetime",
                    "fulfilledOn": "datetime",
                    "refundedOn": "datetime",
                    "disputedOn": "datetime",
                    "disputeUpdatedOn": "datetime",
                    "disputeLastStatus": None,
                    "customerPaid": {"unit": None, "value": None, "string": None},
                    "netAmount": {"unit": None, "value": None, "string": None},
                    "applicationFee": {"unit": None, "value": None, "string": None},
                    "allAddresses": (
                        "list",
                        {
                            0: {
                                "type": None,
                                "addressee": None,
                                "line1": None,
                                "line2": None,
                                "city": None,
                                "state": None,
                                "country": None,
                                "postalCode": None,
                            },
                            1: {
                                "type": None,
                                "addressee": None,
                                "line1": None,
                                "line2": None,
                                "city": None,
                                "state": None,
                                "country": None,
                                "postalCode": None,
                            },
                        },
                    ),
                    "shippingAddress": {
                        "type": None,
                        "japanType": None,
                        "addressee": None,
                        "line1": None,
                        "line2": None,
                        "city": None,
                        "state": None,
                        "country": None,
                        "postalCode": None,
                    },
                    "billingAddress": {
                        "type": None,
                        "addressee": None,
                        "line1": None,
                        "line2": None,
                        "city": None,
                        "state": None,
                        "country": None,
                        "postalCode": None,
                    },
                    "shippingProvider": None,
                    "shippingTracking": None,
                    "shippingTrackingURL": None,
                    "customerInfo": {"fullName": None, "email": None},
                    "purchasedItems": (
                        "list",
                        {
                            0: {
                                "count": None,
                                "rowTotal": {"unit": None, "value": None, "string": None},
                                "productId": None,
                                "productName": None,
                                "productSlug": None,
                                "variantId": None,
                                "variantName": None,
                                "variantSlug": None,
                                "variantSKU": None,
                                "variantImage": {"url": None},
                                "variantPrice": {"unit": None, "value": None, "string": None},
                                "weight": None,
                                "width": None,
                                "height": None,
                                "length": None,
                            },
                            1: {
                                "count": None,
                                "rowTotal": {"unit": None, "value": None, "string": None},
                                "productId": None,
                                "productName": None,
                                "productSlug": None,
                                "variantId": None,
                                "variantName": None,
                                "variantSlug": None,
                                "variantSKU": None,
                                "variantImage": {"url": None},
                                "variantPrice": {"unit": None, "value": None, "string": None},
                                "width": None,
                                "height": None,
                                "length": None,
                            },
                        },
                    ),
                    "purchasedItemsCount": None,
                    "stripeDetails": {
                        "paymentMethod": None,
                        "paymentIntentId": None,
                        "customerId": None,
                        "chargeId": None,
                    },
                    "stripeCard": {
                        "last4": None,
                        "brand": None,
                        "ownerName": None,
                        "expires": {"year": None, "month": None},
                    },
                    "paypalDetails": {
                        "orderId": None,
                        "payerId": None,
                        "captureId": None,
                        "refundId": None,
                        "refundReason": None,
                        "disputeId": None,
                    },
                    "customData": ("list", {0: ("dict", {0: (None, None)})}),
                    "metadata": {"isBuyNow": None},
                    "isCustomerDeleted": None,
                    "isShippingRequired": None,
                    "hasDownloads": None,
                    "paymentProcessor": None,
                    "totals": {
                        "extras": (
                            "list",
                            {
                                0: {
                                    "type": None,
                                    "name": None,
                                    "description": None,
                                    "price": {"unit": None, "value": None, "string": None},
                                }
                            },
                        )
                    },
                    "downloadFiles": ("list", {0: {"id": None, "name": None, "url": None}}),
                },
                1: {
                    "orderId": None,
                    "status": None,
                    "comment": None,
                    "orderComment": None,
                    "acceptedOn": "datetime",
                    "fulfilledOn": "datetime",
                    "refundedOn": "datetime",
                    "disputedOn": "datetime",
                    "disputeUpdatedOn": "datetime",
                    "disputeLastStatus": None,
                    "customerPaid": {"unit": None, "value": None, "string": None},
                    "netAmount": {"unit": None, "value": None, "string": None},
                    "applicationFee": {"unit": None, "value": None, "string": None},
                    "allAddresses": (
                        "list",
                        {
                            0: {
                                "type": None,
                                "addressee": None,
                                "line1": None,
                                "line2": None,
                                "city": None,
                                "state": None,
                                "country": None,
                                "postalCode": None,
                            },
                            1: {
                                "type": None,
                                "addressee": None,
                                "line1": None,
                                "line2": None,
                                "city": None,
                                "state": None,
                                "country": None,
                                "postalCode": None,
                            },
                        },
                    ),
                    "shippingAddress": {
                        "type": None,
                        "addressee": None,
                        "line1": None,
                        "line2": None,
                        "city": None,
                        "state": None,
                        "country": None,
                        "postalCode": None,
                    },
                    "billingAddress": {
                        "type": None,
                        "addressee": None,
                        "line1": None,
                        "line2": None,
                        "city": None,
                        "state": None,
                        "country": None,
                        "postalCode": None,
                    },
                    "shippingProvider": None,
                    "shippingTracking": None,
                    "shippingTrackingURL": None,
                    "customerInfo": {"fullName": None, "email": None},
                    "purchasedItems": (
                        "list",
                        {
                            0: {
                                "count": None,
                                "rowTotal": {"unit": None, "value": None, "string": None},
                                "productId": None,
                                "productName": None,
                                "productSlug": None,
                                "variantId": None,
                                "variantName": None,
                                "variantSlug": None,
                                "variantSKU": None,
                                "variantImage": {"url": None},
                                "variantPrice": {"unit": None, "value": None, "string": None},
                                "weight": None,
                                "width": None,
                                "height": None,
                                "length": None,
                            },
                            1: {
                                "count": None,
                                "rowTotal": {"unit": None, "value": None, "string": None},
                                "productId": None,
                                "productName": None,
                                "productSlug": None,
                                "variantId": None,
                                "variantName": None,
                                "variantSlug": None,
                                "variantSKU": None,
                                "variantImage": {"url": None},
                                "variantPrice": {"unit": None, "value": None, "string": None},
                                "weight": None,
                                "width": None,
                                "height": None,
                                "length": None,
                            },
                        },
                    ),
                    "purchasedItemsCount": None,
                    "stripeDetails": {
                        "paymentMethod": None,
                        "paymentIntentId": None,
                        "customerId": None,
                        "chargeId": None,
                        "refundId": None,
                        "refundReason": None,
                    },
                    "stripeCard": {
                        "last4": None,
                        "brand": None,
                        "ownerName": None,
                        "expires": {"year": None, "month": None},
                    },
                    "paypalDetails": {
                        "orderId": None,
                        "payerId": None,
                        "captureId": None,
                        "refundId": None,
                        "refundReason": None,
                        "disputeId": None,
                    },
                    "customData": ("list", {0: ("dict", {0: (None, None)})}),
                    "metadata": {"isBuyNow": None},
                    "isCustomerDeleted": None,
                    "isShippingRequired": None,
                    "hasDownloads": None,
                    "paymentProcessor": None,
                    "totals": {
                        "subtotal": {"unit": None, "value": None, "string": None},
                        "extras": (
                            "list",
                            {
                                0: {
                                    "type": None,
                                    "name": None,
                                    "description": None,
                                    "price": {"unit": None, "value": None, "string": None},
                                },
                                1: {
                                    "type": None,
                                    "name": None,
                                    "description": None,
                                    "price": {"unit": None, "value": None, "string": None},
                                },
                                2: {
                                    "type": None,
                                    "name": None,
                                    "description": None,
                                    "price": {"unit": None, "value": None, "string": None},
                                },
                            },
                        ),
                        "total": {"unit": None, "value": None, "string": None},
                    },
                    "downloadFiles": ("list", {0: {"id": None, "name": None, "url": None}}),
                },
            },
        ),
        "pagination": {"limit": None, "offset": None, "total": None},
    }
    response = client.orders.list(site_id="580e63e98c9a982ac9b8b741")
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.orders.list(site_id="580e63e98c9a982ac9b8b741")
    validate_response(async_response, expected_response, expected_types)


async def test_get(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "orderId": "fc7-128",
        "status": "refunded",
        "comment": "Customer requested gift wrapping and a personalized note saying: Happy Birthday, Ford! ðŸŽ‰ Please ensure the item is packed with extra bubble wrap for safe transit.",
        "orderComment": 'Please gift wrap with a personal note saying "Happy Birthday, Ford! ðŸŽ‰',
        "acceptedOn": "2024-03-29T21:29:21Z",
        "fulfilledOn": "2024-03-29T21:29:21Z",
        "refundedOn": "2024-04-08T18:25:04Z",
        "disputedOn": "2024-03-29T21:29:21Z",
        "disputeUpdatedOn": "2024-03-29T21:29:21Z",
        "disputeLastStatus": "charge_refunded",
        "customerPaid": {"unit": "USD", "value": "5892", "string": " 118.73 USD"},
        "netAmount": {"unit": "USD", "value": "5892", "string": " 112.62 USD"},
        "applicationFee": {"unit": "USD", "value": "5892", "string": " 2.37 USD"},
        "allAddresses": [
            {
                "type": "billing",
                "japanType": "kana",
                "addressee": "Arthur Dent",
                "line1": "20 W 34th St",
                "line2": "Empire State Building",
                "city": "New York",
                "state": "New York",
                "country": "US",
                "postalCode": "10118",
            },
            {
                "type": "shipping",
                "japanType": "kana",
                "addressee": "Arthur Dent",
                "line1": "20 W 34th St",
                "line2": "Empire State Building",
                "city": "New York",
                "state": "New York",
                "country": "US",
                "postalCode": "10118",
            },
        ],
        "shippingAddress": {
            "type": "shipping",
            "japanType": "kanji",
            "addressee": "Arthur Dent",
            "line1": "20 W 34th St",
            "line2": "Empire State Building",
            "city": "New York",
            "state": "New York",
            "country": "US",
            "postalCode": "10118",
        },
        "billingAddress": {
            "type": "billing",
            "japanType": "kana",
            "addressee": "Arthur Dent",
            "line1": "20 W 34th St",
            "line2": "Empire State Building",
            "city": "New York",
            "state": "New York",
            "country": "US",
            "postalCode": "10118",
        },
        "shippingProvider": "Shipping Company, Co.",
        "shippingTracking": "tr00000000001",
        "shippingTrackingURL": "https://www.shippingcompany.com/tracking/tr00000000001",
        "customerInfo": {"fullName": "Arthur Dent", "email": "arthur.dent@example.com"},
        "purchasedItems": [
            {
                "count": 1,
                "rowTotal": {"unit": "USD", "value": "5892", "string": " 55.61 USD"},
                "productId": "66072fb61b89448912e26791",
                "productName": "Luxurious Fresh Ball",
                "productSlug": "luxurious-fresh-ball",
                "variantId": "66072fb71b89448912e2683f",
                "variantName": "Luxurious Fresh Ball Generic: Bronze, Practical: Plastic",
                "variantSlug": "luxurious-fresh-ball-generic-bronze-practical-plastic",
                "variantSKU": "luxurious-fresh-ball-generic-bronze-practical-plastic",
                "variantImage": {
                    "url": "https://d1otoma47x30pg.cloudfront.net/66072f39417a2a35b2589cc7/66072fb51b89448912e2672c_image14.jpeg"
                },
                "variantPrice": {"unit": "USD", "value": "5892", "string": " 55.61 USD"},
                "weight": 11,
                "width": 82,
                "height": 70,
                "length": 9,
            },
            {
                "count": 1,
                "rowTotal": {"unit": "USD", "value": "5892", "string": " 53.44 USD"},
                "productId": "66072fb61b89448912e26799",
                "productName": "Recycled Steel Gloves",
                "productSlug": "recycled-steel-gloves",
                "variantId": "66072fb91b89448912e26ab9",
                "variantName": "Recycled Steel Gloves Electronic: Granite, Handcrafted: grey",
                "variantSlug": "recycled-steel-gloves-electronic-granite-handcrafted-grey",
                "variantSKU": "recycled-steel-gloves-electronic-granite-handcrafted-grey",
                "variantImage": {
                    "url": "https://d1otoma47x30pg.cloudfront.net/66072f39417a2a35b2589cc7/66072fb51b89448912e2671e_image2.jpeg"
                },
                "variantPrice": {"unit": "USD", "value": "5892", "string": " 53.44 USD"},
                "weight": 38,
                "width": 76,
                "height": 85,
                "length": 40,
            },
        ],
        "purchasedItemsCount": 2,
        "stripeDetails": {
            "subscriptionId": "sub_1J6xwG2eZvKYlo2CXu9Zt0Tn",
            "paymentMethod": "pm_1OzmzBJYFi4lcbXWHKNdXU7j",
            "paymentIntentId": "pi_3OzmzDJYFi4lcbXW1hTBW6ft",
            "customerId": "cus_PpRsNHwWdUoRKR",
            "chargeId": "ch_3OzmzDJYFi4lcbXW1ndkkrH2",
            "disputeId": "disputeId",
            "refundId": "re_3OzmzDJYFi4lcbXW1kFAmlBk",
            "refundReason": "fraudulent",
        },
        "stripeCard": {
            "last4": "4242",
            "brand": "Visa",
            "ownerName": "Arthur Dent",
            "expires": {"year": 2024, "month": 4},
        },
        "paypalDetails": {
            "orderId": "1a2b3c4d5e6f7g8h9i0j",
            "payerId": "9k8j7i6h5g4f3e2d1c0b",
            "captureId": "qwe123rty456uio789p",
            "refundId": "abcde12345fghij67890",
            "refundReason": "Customer requested refund",
            "disputeId": "zxcvbnm987poiuytrewq",
        },
        "customData": [{"key": "value"}],
        "metadata": {"isBuyNow": False},
        "isCustomerDeleted": False,
        "isShippingRequired": True,
        "hasDownloads": False,
        "paymentProcessor": "stripe",
        "totals": {
            "subtotal": {"unit": "USD", "value": "5892", "string": " 109.05 USD"},
            "extras": [
                {
                    "type": "tax",
                    "name": "State Taxes",
                    "description": "NY Taxes (4.00%)",
                    "price": {"unit": "USD", "value": "5892", "string": " 4.36 USD"},
                },
                {
                    "type": "tax",
                    "name": "City Taxes",
                    "description": "NEW YORK Taxes (4.88%)",
                    "price": {"unit": "USD", "value": "5892", "string": " 5.32 USD"},
                },
                {
                    "type": "shipping",
                    "name": "Flat",
                    "description": "",
                    "price": {"unit": "USD", "value": "5892", "string": " 0.00 USD"},
                },
            ],
            "total": {"unit": "USD", "value": "5892", "string": " 118.73 USD"},
        },
        "downloadFiles": [
            {
                "id": "5e9a5eba75e0ac242e1b6f64",
                "name": "New product guide",
                "url": "https://webflow.com/dashboard/download-digital-product?payload=5d93ba5e38c6b0160ab711d3;e7634a;5eb1aac72912ec06f561278c;5e9a5eba75e0ac242e1b6f63:ka2nehxy:4a1ee0a632feaab94294350087215ed89533f2f530903e3b933b638940e921aa",
            }
        ],
    }
    expected_types: typing.Any = {
        "orderId": None,
        "status": None,
        "comment": None,
        "orderComment": None,
        "acceptedOn": "datetime",
        "fulfilledOn": "datetime",
        "refundedOn": "datetime",
        "disputedOn": "datetime",
        "disputeUpdatedOn": "datetime",
        "disputeLastStatus": None,
        "customerPaid": {"unit": None, "value": None, "string": None},
        "netAmount": {"unit": None, "value": None, "string": None},
        "applicationFee": {"unit": None, "value": None, "string": None},
        "allAddresses": (
            "list",
            {
                0: {
                    "type": None,
                    "japanType": None,
                    "addressee": None,
                    "line1": None,
                    "line2": None,
                    "city": None,
                    "state": None,
                    "country": None,
                    "postalCode": None,
                },
                1: {
                    "type": None,
                    "japanType": None,
                    "addressee": None,
                    "line1": None,
                    "line2": None,
                    "city": None,
                    "state": None,
                    "country": None,
                    "postalCode": None,
                },
            },
        ),
        "shippingAddress": {
            "type": None,
            "japanType": None,
            "addressee": None,
            "line1": None,
            "line2": None,
            "city": None,
            "state": None,
            "country": None,
            "postalCode": None,
        },
        "billingAddress": {
            "type": None,
            "japanType": None,
            "addressee": None,
            "line1": None,
            "line2": None,
            "city": None,
            "state": None,
            "country": None,
            "postalCode": None,
        },
        "shippingProvider": None,
        "shippingTracking": None,
        "shippingTrackingURL": None,
        "customerInfo": {"fullName": None, "email": None},
        "purchasedItems": (
            "list",
            {
                0: {
                    "count": None,
                    "rowTotal": {"unit": None, "value": None, "string": None},
                    "productId": None,
                    "productName": None,
                    "productSlug": None,
                    "variantId": None,
                    "variantName": None,
                    "variantSlug": None,
                    "variantSKU": None,
                    "variantImage": {"url": None},
                    "variantPrice": {"unit": None, "value": None, "string": None},
                    "weight": None,
                    "width": None,
                    "height": None,
                    "length": None,
                },
                1: {
                    "count": None,
                    "rowTotal": {"unit": None, "value": None, "string": None},
                    "productId": None,
                    "productName": None,
                    "productSlug": None,
                    "variantId": None,
                    "variantName": None,
                    "variantSlug": None,
                    "variantSKU": None,
                    "variantImage": {"url": None},
                    "variantPrice": {"unit": None, "value": None, "string": None},
                    "weight": None,
                    "width": None,
                    "height": None,
                    "length": None,
                },
            },
        ),
        "purchasedItemsCount": None,
        "stripeDetails": {
            "subscriptionId": None,
            "paymentMethod": None,
            "paymentIntentId": None,
            "customerId": None,
            "chargeId": None,
            "disputeId": None,
            "refundId": None,
            "refundReason": None,
        },
        "stripeCard": {"last4": None, "brand": None, "ownerName": None, "expires": {"year": None, "month": None}},
        "paypalDetails": {
            "orderId": None,
            "payerId": None,
            "captureId": None,
            "refundId": None,
            "refundReason": None,
            "disputeId": None,
        },
        "customData": ("list", {0: ("dict", {0: (None, None)})}),
        "metadata": {"isBuyNow": None},
        "isCustomerDeleted": None,
        "isShippingRequired": None,
        "hasDownloads": None,
        "paymentProcessor": None,
        "totals": {
            "subtotal": {"unit": None, "value": None, "string": None},
            "extras": (
                "list",
                {
                    0: {
                        "type": None,
                        "name": None,
                        "description": None,
                        "price": {"unit": None, "value": None, "string": None},
                    },
                    1: {
                        "type": None,
                        "name": None,
                        "description": None,
                        "price": {"unit": None, "value": None, "string": None},
                    },
                    2: {
                        "type": None,
                        "name": None,
                        "description": None,
                        "price": {"unit": None, "value": None, "string": None},
                    },
                },
            ),
            "total": {"unit": None, "value": None, "string": None},
        },
        "downloadFiles": ("list", {0: {"id": None, "name": None, "url": None}}),
    }
    response = client.orders.get(site_id="580e63e98c9a982ac9b8b741", order_id="5e8518516e147040726cc415")
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.orders.get(
        site_id="580e63e98c9a982ac9b8b741", order_id="5e8518516e147040726cc415"
    )
    validate_response(async_response, expected_response, expected_types)


async def test_update(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "orderId": "fc7-128",
        "status": "refunded",
        "comment": "Customer requested gift wrapping and a personalized note saying: Happy Birthday, Ford! ðŸŽ‰ Please ensure the item is packed with extra bubble wrap for safe transit.",
        "orderComment": 'Please gift wrap with a personal note saying "Happy Birthday, Ford! ðŸŽ‰',
        "acceptedOn": "2024-03-29T21:29:21Z",
        "fulfilledOn": "2024-03-29T21:29:21Z",
        "refundedOn": "2024-04-08T18:25:04Z",
        "disputedOn": "2024-03-29T21:29:21Z",
        "disputeUpdatedOn": "2024-03-29T21:29:21Z",
        "disputeLastStatus": "charge_refunded",
        "customerPaid": {"unit": "USD", "value": "5892", "string": " 118.73 USD"},
        "netAmount": {"unit": "USD", "value": "5892", "string": " 112.62 USD"},
        "applicationFee": {"unit": "USD", "value": "5892", "string": " 2.37 USD"},
        "allAddresses": [
            {
                "type": "billing",
                "japanType": "kana",
                "addressee": "Arthur Dent",
                "line1": "20 W 34th St",
                "line2": "Empire State Building",
                "city": "New York",
                "state": "New York",
                "country": "US",
                "postalCode": "10118",
            },
            {
                "type": "shipping",
                "japanType": "kana",
                "addressee": "Arthur Dent",
                "line1": "20 W 34th St",
                "line2": "Empire State Building",
                "city": "New York",
                "state": "New York",
                "country": "US",
                "postalCode": "10118",
            },
        ],
        "shippingAddress": {
            "type": "shipping",
            "japanType": "kanji",
            "addressee": "Arthur Dent",
            "line1": "20 W 34th St",
            "line2": "Empire State Building",
            "city": "New York",
            "state": "New York",
            "country": "US",
            "postalCode": "10118",
        },
        "billingAddress": {
            "type": "billing",
            "japanType": "kana",
            "addressee": "Arthur Dent",
            "line1": "20 W 34th St",
            "line2": "Empire State Building",
            "city": "New York",
            "state": "New York",
            "country": "US",
            "postalCode": "10118",
        },
        "shippingProvider": "Shipping Company, Co.",
        "shippingTracking": "tr00000000001",
        "shippingTrackingURL": "https://www.shippingcompany.com/tracking/tr00000000001",
        "customerInfo": {"fullName": "Arthur Dent", "email": "arthur.dent@example.com"},
        "purchasedItems": [
            {
                "count": 1,
                "rowTotal": {"unit": "USD", "value": "5892", "string": " 55.61 USD"},
                "productId": "66072fb61b89448912e26791",
                "productName": "Luxurious Fresh Ball",
                "productSlug": "luxurious-fresh-ball",
                "variantId": "66072fb71b89448912e2683f",
                "variantName": "Luxurious Fresh Ball Generic: Bronze, Practical: Plastic",
                "variantSlug": "luxurious-fresh-ball-generic-bronze-practical-plastic",
                "variantSKU": "luxurious-fresh-ball-generic-bronze-practical-plastic",
                "variantImage": {
                    "url": "https://d1otoma47x30pg.cloudfront.net/66072f39417a2a35b2589cc7/66072fb51b89448912e2672c_image14.jpeg"
                },
                "variantPrice": {"unit": "USD", "value": "5892", "string": " 55.61 USD"},
                "weight": 11,
                "width": 82,
                "height": 70,
                "length": 9,
            },
            {
                "count": 1,
                "rowTotal": {"unit": "USD", "value": "5892", "string": " 53.44 USD"},
                "productId": "66072fb61b89448912e26799",
                "productName": "Recycled Steel Gloves",
                "productSlug": "recycled-steel-gloves",
                "variantId": "66072fb91b89448912e26ab9",
                "variantName": "Recycled Steel Gloves Electronic: Granite, Handcrafted: grey",
                "variantSlug": "recycled-steel-gloves-electronic-granite-handcrafted-grey",
                "variantSKU": "recycled-steel-gloves-electronic-granite-handcrafted-grey",
                "variantImage": {
                    "url": "https://d1otoma47x30pg.cloudfront.net/66072f39417a2a35b2589cc7/66072fb51b89448912e2671e_image2.jpeg"
                },
                "variantPrice": {"unit": "USD", "value": "5892", "string": " 53.44 USD"},
                "weight": 38,
                "width": 76,
                "height": 85,
                "length": 40,
            },
        ],
        "purchasedItemsCount": 2,
        "stripeDetails": {
            "subscriptionId": "sub_1J6xwG2eZvKYlo2CXu9Zt0Tn",
            "paymentMethod": "pm_1OzmzBJYFi4lcbXWHKNdXU7j",
            "paymentIntentId": "pi_3OzmzDJYFi4lcbXW1hTBW6ft",
            "customerId": "cus_PpRsNHwWdUoRKR",
            "chargeId": "ch_3OzmzDJYFi4lcbXW1ndkkrH2",
            "disputeId": "disputeId",
            "refundId": "re_3OzmzDJYFi4lcbXW1kFAmlBk",
            "refundReason": "fraudulent",
        },
        "stripeCard": {
            "last4": "4242",
            "brand": "Visa",
            "ownerName": "Arthur Dent",
            "expires": {"year": 2024, "month": 4},
        },
        "paypalDetails": {
            "orderId": "1a2b3c4d5e6f7g8h9i0j",
            "payerId": "9k8j7i6h5g4f3e2d1c0b",
            "captureId": "qwe123rty456uio789p",
            "refundId": "abcde12345fghij67890",
            "refundReason": "Customer requested refund",
            "disputeId": "zxcvbnm987poiuytrewq",
        },
        "customData": [{"key": "value"}],
        "metadata": {"isBuyNow": False},
        "isCustomerDeleted": False,
        "isShippingRequired": True,
        "hasDownloads": False,
        "paymentProcessor": "stripe",
        "totals": {
            "subtotal": {"unit": "USD", "value": "5892", "string": " 109.05 USD"},
            "extras": [
                {
                    "type": "tax",
                    "name": "State Taxes",
                    "description": "NY Taxes (4.00%)",
                    "price": {"unit": "USD", "value": "5892", "string": " 4.36 USD"},
                },
                {
                    "type": "tax",
                    "name": "City Taxes",
                    "description": "NEW YORK Taxes (4.88%)",
                    "price": {"unit": "USD", "value": "5892", "string": " 5.32 USD"},
                },
                {
                    "type": "shipping",
                    "name": "Flat",
                    "description": "",
                    "price": {"unit": "USD", "value": "5892", "string": " 0.00 USD"},
                },
            ],
            "total": {"unit": "USD", "value": "5892", "string": " 118.73 USD"},
        },
        "downloadFiles": [
            {
                "id": "5e9a5eba75e0ac242e1b6f64",
                "name": "New product guide",
                "url": "https://webflow.com/dashboard/download-digital-product?payload=5d93ba5e38c6b0160ab711d3;e7634a;5eb1aac72912ec06f561278c;5e9a5eba75e0ac242e1b6f63:ka2nehxy:4a1ee0a632feaab94294350087215ed89533f2f530903e3b933b638940e921aa",
            }
        ],
    }
    expected_types: typing.Any = {
        "orderId": None,
        "status": None,
        "comment": None,
        "orderComment": None,
        "acceptedOn": "datetime",
        "fulfilledOn": "datetime",
        "refundedOn": "datetime",
        "disputedOn": "datetime",
        "disputeUpdatedOn": "datetime",
        "disputeLastStatus": None,
        "customerPaid": {"unit": None, "value": None, "string": None},
        "netAmount": {"unit": None, "value": None, "string": None},
        "applicationFee": {"unit": None, "value": None, "string": None},
        "allAddresses": (
            "list",
            {
                0: {
                    "type": None,
                    "japanType": None,
                    "addressee": None,
                    "line1": None,
                    "line2": None,
                    "city": None,
                    "state": None,
                    "country": None,
                    "postalCode": None,
                },
                1: {
                    "type": None,
                    "japanType": None,
                    "addressee": None,
                    "line1": None,
                    "line2": None,
                    "city": None,
                    "state": None,
                    "country": None,
                    "postalCode": None,
                },
            },
        ),
        "shippingAddress": {
            "type": None,
            "japanType": None,
            "addressee": None,
            "line1": None,
            "line2": None,
            "city": None,
            "state": None,
            "country": None,
            "postalCode": None,
        },
        "billingAddress": {
            "type": None,
            "japanType": None,
            "addressee": None,
            "line1": None,
            "line2": None,
            "city": None,
            "state": None,
            "country": None,
            "postalCode": None,
        },
        "shippingProvider": None,
        "shippingTracking": None,
        "shippingTrackingURL": None,
        "customerInfo": {"fullName": None, "email": None},
        "purchasedItems": (
            "list",
            {
                0: {
                    "count": None,
                    "rowTotal": {"unit": None, "value": None, "string": None},
                    "productId": None,
                    "productName": None,
                    "productSlug": None,
                    "variantId": None,
                    "variantName": None,
                    "variantSlug": None,
                    "variantSKU": None,
                    "variantImage": {"url": None},
                    "variantPrice": {"unit": None, "value": None, "string": None},
                    "weight": None,
                    "width": None,
                    "height": None,
                    "length": None,
                },
                1: {
                    "count": None,
                    "rowTotal": {"unit": None, "value": None, "string": None},
                    "productId": None,
                    "productName": None,
                    "productSlug": None,
                    "variantId": None,
                    "variantName": None,
                    "variantSlug": None,
                    "variantSKU": None,
                    "variantImage": {"url": None},
                    "variantPrice": {"unit": None, "value": None, "string": None},
                    "weight": None,
                    "width": None,
                    "height": None,
                    "length": None,
                },
            },
        ),
        "purchasedItemsCount": None,
        "stripeDetails": {
            "subscriptionId": None,
            "paymentMethod": None,
            "paymentIntentId": None,
            "customerId": None,
            "chargeId": None,
            "disputeId": None,
            "refundId": None,
            "refundReason": None,
        },
        "stripeCard": {"last4": None, "brand": None, "ownerName": None, "expires": {"year": None, "month": None}},
        "paypalDetails": {
            "orderId": None,
            "payerId": None,
            "captureId": None,
            "refundId": None,
            "refundReason": None,
            "disputeId": None,
        },
        "customData": ("list", {0: ("dict", {0: (None, None)})}),
        "metadata": {"isBuyNow": None},
        "isCustomerDeleted": None,
        "isShippingRequired": None,
        "hasDownloads": None,
        "paymentProcessor": None,
        "totals": {
            "subtotal": {"unit": None, "value": None, "string": None},
            "extras": (
                "list",
                {
                    0: {
                        "type": None,
                        "name": None,
                        "description": None,
                        "price": {"unit": None, "value": None, "string": None},
                    },
                    1: {
                        "type": None,
                        "name": None,
                        "description": None,
                        "price": {"unit": None, "value": None, "string": None},
                    },
                    2: {
                        "type": None,
                        "name": None,
                        "description": None,
                        "price": {"unit": None, "value": None, "string": None},
                    },
                },
            ),
            "total": {"unit": None, "value": None, "string": None},
        },
        "downloadFiles": ("list", {0: {"id": None, "name": None, "url": None}}),
    }
    response = client.orders.update(site_id="580e63e98c9a982ac9b8b741", order_id="5e8518516e147040726cc415")
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.orders.update(
        site_id="580e63e98c9a982ac9b8b741", order_id="5e8518516e147040726cc415"
    )
    validate_response(async_response, expected_response, expected_types)


async def test_update_fulfill(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "orderId": "fc7-128",
        "status": "refunded",
        "comment": "Customer requested gift wrapping and a personalized note saying: Happy Birthday, Ford! ðŸŽ‰ Please ensure the item is packed with extra bubble wrap for safe transit.",
        "orderComment": 'Please gift wrap with a personal note saying "Happy Birthday, Ford! ðŸŽ‰',
        "acceptedOn": "2024-03-29T21:29:21Z",
        "fulfilledOn": "2024-03-29T21:29:21Z",
        "refundedOn": "2024-04-08T18:25:04Z",
        "disputedOn": "2024-03-29T21:29:21Z",
        "disputeUpdatedOn": "2024-03-29T21:29:21Z",
        "disputeLastStatus": "charge_refunded",
        "customerPaid": {"unit": "USD", "value": "5892", "string": " 118.73 USD"},
        "netAmount": {"unit": "USD", "value": "5892", "string": " 112.62 USD"},
        "applicationFee": {"unit": "USD", "value": "5892", "string": " 2.37 USD"},
        "allAddresses": [
            {
                "type": "billing",
                "japanType": "kana",
                "addressee": "Arthur Dent",
                "line1": "20 W 34th St",
                "line2": "Empire State Building",
                "city": "New York",
                "state": "New York",
                "country": "US",
                "postalCode": "10118",
            },
            {
                "type": "shipping",
                "japanType": "kana",
                "addressee": "Arthur Dent",
                "line1": "20 W 34th St",
                "line2": "Empire State Building",
                "city": "New York",
                "state": "New York",
                "country": "US",
                "postalCode": "10118",
            },
        ],
        "shippingAddress": {
            "type": "shipping",
            "japanType": "kanji",
            "addressee": "Arthur Dent",
            "line1": "20 W 34th St",
            "line2": "Empire State Building",
            "city": "New York",
            "state": "New York",
            "country": "US",
            "postalCode": "10118",
        },
        "billingAddress": {
            "type": "billing",
            "japanType": "kana",
            "addressee": "Arthur Dent",
            "line1": "20 W 34th St",
            "line2": "Empire State Building",
            "city": "New York",
            "state": "New York",
            "country": "US",
            "postalCode": "10118",
        },
        "shippingProvider": "Shipping Company, Co.",
        "shippingTracking": "tr00000000001",
        "shippingTrackingURL": "https://www.shippingcompany.com/tracking/tr00000000001",
        "customerInfo": {"fullName": "Arthur Dent", "email": "arthur.dent@example.com"},
        "purchasedItems": [
            {
                "count": 1,
                "rowTotal": {"unit": "USD", "value": "5892", "string": " 55.61 USD"},
                "productId": "66072fb61b89448912e26791",
                "productName": "Luxurious Fresh Ball",
                "productSlug": "luxurious-fresh-ball",
                "variantId": "66072fb71b89448912e2683f",
                "variantName": "Luxurious Fresh Ball Generic: Bronze, Practical: Plastic",
                "variantSlug": "luxurious-fresh-ball-generic-bronze-practical-plastic",
                "variantSKU": "luxurious-fresh-ball-generic-bronze-practical-plastic",
                "variantImage": {
                    "url": "https://d1otoma47x30pg.cloudfront.net/66072f39417a2a35b2589cc7/66072fb51b89448912e2672c_image14.jpeg"
                },
                "variantPrice": {"unit": "USD", "value": "5892", "string": " 55.61 USD"},
                "weight": 11,
                "width": 82,
                "height": 70,
                "length": 9,
            },
            {
                "count": 1,
                "rowTotal": {"unit": "USD", "value": "5892", "string": " 53.44 USD"},
                "productId": "66072fb61b89448912e26799",
                "productName": "Recycled Steel Gloves",
                "productSlug": "recycled-steel-gloves",
                "variantId": "66072fb91b89448912e26ab9",
                "variantName": "Recycled Steel Gloves Electronic: Granite, Handcrafted: grey",
                "variantSlug": "recycled-steel-gloves-electronic-granite-handcrafted-grey",
                "variantSKU": "recycled-steel-gloves-electronic-granite-handcrafted-grey",
                "variantImage": {
                    "url": "https://d1otoma47x30pg.cloudfront.net/66072f39417a2a35b2589cc7/66072fb51b89448912e2671e_image2.jpeg"
                },
                "variantPrice": {"unit": "USD", "value": "5892", "string": " 53.44 USD"},
                "weight": 38,
                "width": 76,
                "height": 85,
                "length": 40,
            },
        ],
        "purchasedItemsCount": 2,
        "stripeDetails": {
            "subscriptionId": "sub_1J6xwG2eZvKYlo2CXu9Zt0Tn",
            "paymentMethod": "pm_1OzmzBJYFi4lcbXWHKNdXU7j",
            "paymentIntentId": "pi_3OzmzDJYFi4lcbXW1hTBW6ft",
            "customerId": "cus_PpRsNHwWdUoRKR",
            "chargeId": "ch_3OzmzDJYFi4lcbXW1ndkkrH2",
            "disputeId": "disputeId",
            "refundId": "re_3OzmzDJYFi4lcbXW1kFAmlBk",
            "refundReason": "fraudulent",
        },
        "stripeCard": {
            "last4": "4242",
            "brand": "Visa",
            "ownerName": "Arthur Dent",
            "expires": {"year": 2024, "month": 4},
        },
        "paypalDetails": {
            "orderId": "1a2b3c4d5e6f7g8h9i0j",
            "payerId": "9k8j7i6h5g4f3e2d1c0b",
            "captureId": "qwe123rty456uio789p",
            "refundId": "abcde12345fghij67890",
            "refundReason": "Customer requested refund",
            "disputeId": "zxcvbnm987poiuytrewq",
        },
        "customData": [{"key": "value"}],
        "metadata": {"isBuyNow": False},
        "isCustomerDeleted": False,
        "isShippingRequired": True,
        "hasDownloads": False,
        "paymentProcessor": "stripe",
        "totals": {
            "subtotal": {"unit": "USD", "value": "5892", "string": " 109.05 USD"},
            "extras": [
                {
                    "type": "tax",
                    "name": "State Taxes",
                    "description": "NY Taxes (4.00%)",
                    "price": {"unit": "USD", "value": "5892", "string": " 4.36 USD"},
                },
                {
                    "type": "tax",
                    "name": "City Taxes",
                    "description": "NEW YORK Taxes (4.88%)",
                    "price": {"unit": "USD", "value": "5892", "string": " 5.32 USD"},
                },
                {
                    "type": "shipping",
                    "name": "Flat",
                    "description": "",
                    "price": {"unit": "USD", "value": "5892", "string": " 0.00 USD"},
                },
            ],
            "total": {"unit": "USD", "value": "5892", "string": " 118.73 USD"},
        },
        "downloadFiles": [
            {
                "id": "5e9a5eba75e0ac242e1b6f64",
                "name": "New product guide",
                "url": "https://webflow.com/dashboard/download-digital-product?payload=5d93ba5e38c6b0160ab711d3;e7634a;5eb1aac72912ec06f561278c;5e9a5eba75e0ac242e1b6f63:ka2nehxy:4a1ee0a632feaab94294350087215ed89533f2f530903e3b933b638940e921aa",
            }
        ],
    }
    expected_types: typing.Any = {
        "orderId": None,
        "status": None,
        "comment": None,
        "orderComment": None,
        "acceptedOn": "datetime",
        "fulfilledOn": "datetime",
        "refundedOn": "datetime",
        "disputedOn": "datetime",
        "disputeUpdatedOn": "datetime",
        "disputeLastStatus": None,
        "customerPaid": {"unit": None, "value": None, "string": None},
        "netAmount": {"unit": None, "value": None, "string": None},
        "applicationFee": {"unit": None, "value": None, "string": None},
        "allAddresses": (
            "list",
            {
                0: {
                    "type": None,
                    "japanType": None,
                    "addressee": None,
                    "line1": None,
                    "line2": None,
                    "city": None,
                    "state": None,
                    "country": None,
                    "postalCode": None,
                },
                1: {
                    "type": None,
                    "japanType": None,
                    "addressee": None,
                    "line1": None,
                    "line2": None,
                    "city": None,
                    "state": None,
                    "country": None,
                    "postalCode": None,
                },
            },
        ),
        "shippingAddress": {
            "type": None,
            "japanType": None,
            "addressee": None,
            "line1": None,
            "line2": None,
            "city": None,
            "state": None,
            "country": None,
            "postalCode": None,
        },
        "billingAddress": {
            "type": None,
            "japanType": None,
            "addressee": None,
            "line1": None,
            "line2": None,
            "city": None,
            "state": None,
            "country": None,
            "postalCode": None,
        },
        "shippingProvider": None,
        "shippingTracking": None,
        "shippingTrackingURL": None,
        "customerInfo": {"fullName": None, "email": None},
        "purchasedItems": (
            "list",
            {
                0: {
                    "count": None,
                    "rowTotal": {"unit": None, "value": None, "string": None},
                    "productId": None,
                    "productName": None,
                    "productSlug": None,
                    "variantId": None,
                    "variantName": None,
                    "variantSlug": None,
                    "variantSKU": None,
                    "variantImage": {"url": None},
                    "variantPrice": {"unit": None, "value": None, "string": None},
                    "weight": None,
                    "width": None,
                    "height": None,
                    "length": None,
                },
                1: {
                    "count": None,
                    "rowTotal": {"unit": None, "value": None, "string": None},
                    "productId": None,
                    "productName": None,
                    "productSlug": None,
                    "variantId": None,
                    "variantName": None,
                    "variantSlug": None,
                    "variantSKU": None,
                    "variantImage": {"url": None},
                    "variantPrice": {"unit": None, "value": None, "string": None},
                    "weight": None,
                    "width": None,
                    "height": None,
                    "length": None,
                },
            },
        ),
        "purchasedItemsCount": None,
        "stripeDetails": {
            "subscriptionId": None,
            "paymentMethod": None,
            "paymentIntentId": None,
            "customerId": None,
            "chargeId": None,
            "disputeId": None,
            "refundId": None,
            "refundReason": None,
        },
        "stripeCard": {"last4": None, "brand": None, "ownerName": None, "expires": {"year": None, "month": None}},
        "paypalDetails": {
            "orderId": None,
            "payerId": None,
            "captureId": None,
            "refundId": None,
            "refundReason": None,
            "disputeId": None,
        },
        "customData": ("list", {0: ("dict", {0: (None, None)})}),
        "metadata": {"isBuyNow": None},
        "isCustomerDeleted": None,
        "isShippingRequired": None,
        "hasDownloads": None,
        "paymentProcessor": None,
        "totals": {
            "subtotal": {"unit": None, "value": None, "string": None},
            "extras": (
                "list",
                {
                    0: {
                        "type": None,
                        "name": None,
                        "description": None,
                        "price": {"unit": None, "value": None, "string": None},
                    },
                    1: {
                        "type": None,
                        "name": None,
                        "description": None,
                        "price": {"unit": None, "value": None, "string": None},
                    },
                    2: {
                        "type": None,
                        "name": None,
                        "description": None,
                        "price": {"unit": None, "value": None, "string": None},
                    },
                },
            ),
            "total": {"unit": None, "value": None, "string": None},
        },
        "downloadFiles": ("list", {0: {"id": None, "name": None, "url": None}}),
    }
    response = client.orders.update_fulfill(site_id="580e63e98c9a982ac9b8b741", order_id="5e8518516e147040726cc415")
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.orders.update_fulfill(
        site_id="580e63e98c9a982ac9b8b741", order_id="5e8518516e147040726cc415"
    )
    validate_response(async_response, expected_response, expected_types)


async def test_update_unfulfill(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "orderId": "fc7-128",
        "status": "refunded",
        "comment": "Customer requested gift wrapping and a personalized note saying: Happy Birthday, Ford! ðŸŽ‰ Please ensure the item is packed with extra bubble wrap for safe transit.",
        "orderComment": 'Please gift wrap with a personal note saying "Happy Birthday, Ford! ðŸŽ‰',
        "acceptedOn": "2024-03-29T21:29:21Z",
        "fulfilledOn": "2024-03-29T21:29:21Z",
        "refundedOn": "2024-04-08T18:25:04Z",
        "disputedOn": "2024-03-29T21:29:21Z",
        "disputeUpdatedOn": "2024-03-29T21:29:21Z",
        "disputeLastStatus": "charge_refunded",
        "customerPaid": {"unit": "USD", "value": "5892", "string": " 118.73 USD"},
        "netAmount": {"unit": "USD", "value": "5892", "string": " 112.62 USD"},
        "applicationFee": {"unit": "USD", "value": "5892", "string": " 2.37 USD"},
        "allAddresses": [
            {
                "type": "billing",
                "japanType": "kana",
                "addressee": "Arthur Dent",
                "line1": "20 W 34th St",
                "line2": "Empire State Building",
                "city": "New York",
                "state": "New York",
                "country": "US",
                "postalCode": "10118",
            },
            {
                "type": "shipping",
                "japanType": "kana",
                "addressee": "Arthur Dent",
                "line1": "20 W 34th St",
                "line2": "Empire State Building",
                "city": "New York",
                "state": "New York",
                "country": "US",
                "postalCode": "10118",
            },
        ],
        "shippingAddress": {
            "type": "shipping",
            "japanType": "kanji",
            "addressee": "Arthur Dent",
            "line1": "20 W 34th St",
            "line2": "Empire State Building",
            "city": "New York",
            "state": "New York",
            "country": "US",
            "postalCode": "10118",
        },
        "billingAddress": {
            "type": "billing",
            "japanType": "kana",
            "addressee": "Arthur Dent",
            "line1": "20 W 34th St",
            "line2": "Empire State Building",
            "city": "New York",
            "state": "New York",
            "country": "US",
            "postalCode": "10118",
        },
        "shippingProvider": "Shipping Company, Co.",
        "shippingTracking": "tr00000000001",
        "shippingTrackingURL": "https://www.shippingcompany.com/tracking/tr00000000001",
        "customerInfo": {"fullName": "Arthur Dent", "email": "arthur.dent@example.com"},
        "purchasedItems": [
            {
                "count": 1,
                "rowTotal": {"unit": "USD", "value": "5892", "string": " 55.61 USD"},
                "productId": "66072fb61b89448912e26791",
                "productName": "Luxurious Fresh Ball",
                "productSlug": "luxurious-fresh-ball",
                "variantId": "66072fb71b89448912e2683f",
                "variantName": "Luxurious Fresh Ball Generic: Bronze, Practical: Plastic",
                "variantSlug": "luxurious-fresh-ball-generic-bronze-practical-plastic",
                "variantSKU": "luxurious-fresh-ball-generic-bronze-practical-plastic",
                "variantImage": {
                    "url": "https://d1otoma47x30pg.cloudfront.net/66072f39417a2a35b2589cc7/66072fb51b89448912e2672c_image14.jpeg"
                },
                "variantPrice": {"unit": "USD", "value": "5892", "string": " 55.61 USD"},
                "weight": 11,
                "width": 82,
                "height": 70,
                "length": 9,
            },
            {
                "count": 1,
                "rowTotal": {"unit": "USD", "value": "5892", "string": " 53.44 USD"},
                "productId": "66072fb61b89448912e26799",
                "productName": "Recycled Steel Gloves",
                "productSlug": "recycled-steel-gloves",
                "variantId": "66072fb91b89448912e26ab9",
                "variantName": "Recycled Steel Gloves Electronic: Granite, Handcrafted: grey",
                "variantSlug": "recycled-steel-gloves-electronic-granite-handcrafted-grey",
                "variantSKU": "recycled-steel-gloves-electronic-granite-handcrafted-grey",
                "variantImage": {
                    "url": "https://d1otoma47x30pg.cloudfront.net/66072f39417a2a35b2589cc7/66072fb51b89448912e2671e_image2.jpeg"
                },
                "variantPrice": {"unit": "USD", "value": "5892", "string": " 53.44 USD"},
                "weight": 38,
                "width": 76,
                "height": 85,
                "length": 40,
            },
        ],
        "purchasedItemsCount": 2,
        "stripeDetails": {
            "subscriptionId": "sub_1J6xwG2eZvKYlo2CXu9Zt0Tn",
            "paymentMethod": "pm_1OzmzBJYFi4lcbXWHKNdXU7j",
            "paymentIntentId": "pi_3OzmzDJYFi4lcbXW1hTBW6ft",
            "customerId": "cus_PpRsNHwWdUoRKR",
            "chargeId": "ch_3OzmzDJYFi4lcbXW1ndkkrH2",
            "disputeId": "disputeId",
            "refundId": "re_3OzmzDJYFi4lcbXW1kFAmlBk",
            "refundReason": "fraudulent",
        },
        "stripeCard": {
            "last4": "4242",
            "brand": "Visa",
            "ownerName": "Arthur Dent",
            "expires": {"year": 2024, "month": 4},
        },
        "paypalDetails": {
            "orderId": "1a2b3c4d5e6f7g8h9i0j",
            "payerId": "9k8j7i6h5g4f3e2d1c0b",
            "captureId": "qwe123rty456uio789p",
            "refundId": "abcde12345fghij67890",
            "refundReason": "Customer requested refund",
            "disputeId": "zxcvbnm987poiuytrewq",
        },
        "customData": [{"key": "value"}],
        "metadata": {"isBuyNow": False},
        "isCustomerDeleted": False,
        "isShippingRequired": True,
        "hasDownloads": False,
        "paymentProcessor": "stripe",
        "totals": {
            "subtotal": {"unit": "USD", "value": "5892", "string": " 109.05 USD"},
            "extras": [
                {
                    "type": "tax",
                    "name": "State Taxes",
                    "description": "NY Taxes (4.00%)",
                    "price": {"unit": "USD", "value": "5892", "string": " 4.36 USD"},
                },
                {
                    "type": "tax",
                    "name": "City Taxes",
                    "description": "NEW YORK Taxes (4.88%)",
                    "price": {"unit": "USD", "value": "5892", "string": " 5.32 USD"},
                },
                {
                    "type": "shipping",
                    "name": "Flat",
                    "description": "",
                    "price": {"unit": "USD", "value": "5892", "string": " 0.00 USD"},
                },
            ],
            "total": {"unit": "USD", "value": "5892", "string": " 118.73 USD"},
        },
        "downloadFiles": [
            {
                "id": "5e9a5eba75e0ac242e1b6f64",
                "name": "New product guide",
                "url": "https://webflow.com/dashboard/download-digital-product?payload=5d93ba5e38c6b0160ab711d3;e7634a;5eb1aac72912ec06f561278c;5e9a5eba75e0ac242e1b6f63:ka2nehxy:4a1ee0a632feaab94294350087215ed89533f2f530903e3b933b638940e921aa",
            }
        ],
    }
    expected_types: typing.Any = {
        "orderId": None,
        "status": None,
        "comment": None,
        "orderComment": None,
        "acceptedOn": "datetime",
        "fulfilledOn": "datetime",
        "refundedOn": "datetime",
        "disputedOn": "datetime",
        "disputeUpdatedOn": "datetime",
        "disputeLastStatus": None,
        "customerPaid": {"unit": None, "value": None, "string": None},
        "netAmount": {"unit": None, "value": None, "string": None},
        "applicationFee": {"unit": None, "value": None, "string": None},
        "allAddresses": (
            "list",
            {
                0: {
                    "type": None,
                    "japanType": None,
                    "addressee": None,
                    "line1": None,
                    "line2": None,
                    "city": None,
                    "state": None,
                    "country": None,
                    "postalCode": None,
                },
                1: {
                    "type": None,
                    "japanType": None,
                    "addressee": None,
                    "line1": None,
                    "line2": None,
                    "city": None,
                    "state": None,
                    "country": None,
                    "postalCode": None,
                },
            },
        ),
        "shippingAddress": {
            "type": None,
            "japanType": None,
            "addressee": None,
            "line1": None,
            "line2": None,
            "city": None,
            "state": None,
            "country": None,
            "postalCode": None,
        },
        "billingAddress": {
            "type": None,
            "japanType": None,
            "addressee": None,
            "line1": None,
            "line2": None,
            "city": None,
            "state": None,
            "country": None,
            "postalCode": None,
        },
        "shippingProvider": None,
        "shippingTracking": None,
        "shippingTrackingURL": None,
        "customerInfo": {"fullName": None, "email": None},
        "purchasedItems": (
            "list",
            {
                0: {
                    "count": None,
                    "rowTotal": {"unit": None, "value": None, "string": None},
                    "productId": None,
                    "productName": None,
                    "productSlug": None,
                    "variantId": None,
                    "variantName": None,
                    "variantSlug": None,
                    "variantSKU": None,
                    "variantImage": {"url": None},
                    "variantPrice": {"unit": None, "value": None, "string": None},
                    "weight": None,
                    "width": None,
                    "height": None,
                    "length": None,
                },
                1: {
                    "count": None,
                    "rowTotal": {"unit": None, "value": None, "string": None},
                    "productId": None,
                    "productName": None,
                    "productSlug": None,
                    "variantId": None,
                    "variantName": None,
                    "variantSlug": None,
                    "variantSKU": None,
                    "variantImage": {"url": None},
                    "variantPrice": {"unit": None, "value": None, "string": None},
                    "weight": None,
                    "width": None,
                    "height": None,
                    "length": None,
                },
            },
        ),
        "purchasedItemsCount": None,
        "stripeDetails": {
            "subscriptionId": None,
            "paymentMethod": None,
            "paymentIntentId": None,
            "customerId": None,
            "chargeId": None,
            "disputeId": None,
            "refundId": None,
            "refundReason": None,
        },
        "stripeCard": {"last4": None, "brand": None, "ownerName": None, "expires": {"year": None, "month": None}},
        "paypalDetails": {
            "orderId": None,
            "payerId": None,
            "captureId": None,
            "refundId": None,
            "refundReason": None,
            "disputeId": None,
        },
        "customData": ("list", {0: ("dict", {0: (None, None)})}),
        "metadata": {"isBuyNow": None},
        "isCustomerDeleted": None,
        "isShippingRequired": None,
        "hasDownloads": None,
        "paymentProcessor": None,
        "totals": {
            "subtotal": {"unit": None, "value": None, "string": None},
            "extras": (
                "list",
                {
                    0: {
                        "type": None,
                        "name": None,
                        "description": None,
                        "price": {"unit": None, "value": None, "string": None},
                    },
                    1: {
                        "type": None,
                        "name": None,
                        "description": None,
                        "price": {"unit": None, "value": None, "string": None},
                    },
                    2: {
                        "type": None,
                        "name": None,
                        "description": None,
                        "price": {"unit": None, "value": None, "string": None},
                    },
                },
            ),
            "total": {"unit": None, "value": None, "string": None},
        },
        "downloadFiles": ("list", {0: {"id": None, "name": None, "url": None}}),
    }
    response = client.orders.update_unfulfill(site_id="580e63e98c9a982ac9b8b741", order_id="5e8518516e147040726cc415")
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.orders.update_unfulfill(
        site_id="580e63e98c9a982ac9b8b741", order_id="5e8518516e147040726cc415"
    )
    validate_response(async_response, expected_response, expected_types)


async def test_refund(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "orderId": "fc7-128",
        "status": "refunded",
        "comment": "Customer requested gift wrapping and a personalized note saying: Happy Birthday, Ford! ðŸŽ‰ Please ensure the item is packed with extra bubble wrap for safe transit.",
        "orderComment": 'Please gift wrap with a personal note saying "Happy Birthday, Ford! ðŸŽ‰',
        "acceptedOn": "2024-03-29T21:29:21Z",
        "fulfilledOn": "2024-03-29T21:29:21Z",
        "refundedOn": "2024-04-08T18:25:04Z",
        "disputedOn": "2024-03-29T21:29:21Z",
        "disputeUpdatedOn": "2024-03-29T21:29:21Z",
        "disputeLastStatus": "charge_refunded",
        "customerPaid": {"unit": "USD", "value": "5892", "string": " 118.73 USD"},
        "netAmount": {"unit": "USD", "value": "5892", "string": " 112.62 USD"},
        "applicationFee": {"unit": "USD", "value": "5892", "string": " 2.37 USD"},
        "allAddresses": [
            {
                "type": "billing",
                "japanType": "kana",
                "addressee": "Arthur Dent",
                "line1": "20 W 34th St",
                "line2": "Empire State Building",
                "city": "New York",
                "state": "New York",
                "country": "US",
                "postalCode": "10118",
            },
            {
                "type": "shipping",
                "japanType": "kana",
                "addressee": "Arthur Dent",
                "line1": "20 W 34th St",
                "line2": "Empire State Building",
                "city": "New York",
                "state": "New York",
                "country": "US",
                "postalCode": "10118",
            },
        ],
        "shippingAddress": {
            "type": "shipping",
            "japanType": "kanji",
            "addressee": "Arthur Dent",
            "line1": "20 W 34th St",
            "line2": "Empire State Building",
            "city": "New York",
            "state": "New York",
            "country": "US",
            "postalCode": "10118",
        },
        "billingAddress": {
            "type": "billing",
            "japanType": "kana",
            "addressee": "Arthur Dent",
            "line1": "20 W 34th St",
            "line2": "Empire State Building",
            "city": "New York",
            "state": "New York",
            "country": "US",
            "postalCode": "10118",
        },
        "shippingProvider": "Shipping Company, Co.",
        "shippingTracking": "tr00000000001",
        "shippingTrackingURL": "https://www.shippingcompany.com/tracking/tr00000000001",
        "customerInfo": {"fullName": "Arthur Dent", "email": "arthur.dent@example.com"},
        "purchasedItems": [
            {
                "count": 1,
                "rowTotal": {"unit": "USD", "value": "5892", "string": " 55.61 USD"},
                "productId": "66072fb61b89448912e26791",
                "productName": "Luxurious Fresh Ball",
                "productSlug": "luxurious-fresh-ball",
                "variantId": "66072fb71b89448912e2683f",
                "variantName": "Luxurious Fresh Ball Generic: Bronze, Practical: Plastic",
                "variantSlug": "luxurious-fresh-ball-generic-bronze-practical-plastic",
                "variantSKU": "luxurious-fresh-ball-generic-bronze-practical-plastic",
                "variantImage": {
                    "url": "https://d1otoma47x30pg.cloudfront.net/66072f39417a2a35b2589cc7/66072fb51b89448912e2672c_image14.jpeg"
                },
                "variantPrice": {"unit": "USD", "value": "5892", "string": " 55.61 USD"},
                "weight": 11,
                "width": 82,
                "height": 70,
                "length": 9,
            },
            {
                "count": 1,
                "rowTotal": {"unit": "USD", "value": "5892", "string": " 53.44 USD"},
                "productId": "66072fb61b89448912e26799",
                "productName": "Recycled Steel Gloves",
                "productSlug": "recycled-steel-gloves",
                "variantId": "66072fb91b89448912e26ab9",
                "variantName": "Recycled Steel Gloves Electronic: Granite, Handcrafted: grey",
                "variantSlug": "recycled-steel-gloves-electronic-granite-handcrafted-grey",
                "variantSKU": "recycled-steel-gloves-electronic-granite-handcrafted-grey",
                "variantImage": {
                    "url": "https://d1otoma47x30pg.cloudfront.net/66072f39417a2a35b2589cc7/66072fb51b89448912e2671e_image2.jpeg"
                },
                "variantPrice": {"unit": "USD", "value": "5892", "string": " 53.44 USD"},
                "weight": 38,
                "width": 76,
                "height": 85,
                "length": 40,
            },
        ],
        "purchasedItemsCount": 2,
        "stripeDetails": {
            "subscriptionId": "sub_1J6xwG2eZvKYlo2CXu9Zt0Tn",
            "paymentMethod": "pm_1OzmzBJYFi4lcbXWHKNdXU7j",
            "paymentIntentId": "pi_3OzmzDJYFi4lcbXW1hTBW6ft",
            "customerId": "cus_PpRsNHwWdUoRKR",
            "chargeId": "ch_3OzmzDJYFi4lcbXW1ndkkrH2",
            "disputeId": "disputeId",
            "refundId": "re_3OzmzDJYFi4lcbXW1kFAmlBk",
            "refundReason": "fraudulent",
        },
        "stripeCard": {
            "last4": "4242",
            "brand": "Visa",
            "ownerName": "Arthur Dent",
            "expires": {"year": 2024, "month": 4},
        },
        "paypalDetails": {
            "orderId": "1a2b3c4d5e6f7g8h9i0j",
            "payerId": "9k8j7i6h5g4f3e2d1c0b",
            "captureId": "qwe123rty456uio789p",
            "refundId": "abcde12345fghij67890",
            "refundReason": "Customer requested refund",
            "disputeId": "zxcvbnm987poiuytrewq",
        },
        "customData": [{"key": "value"}],
        "metadata": {"isBuyNow": False},
        "isCustomerDeleted": False,
        "isShippingRequired": True,
        "hasDownloads": False,
        "paymentProcessor": "stripe",
        "totals": {
            "subtotal": {"unit": "USD", "value": "5892", "string": " 109.05 USD"},
            "extras": [
                {
                    "type": "tax",
                    "name": "State Taxes",
                    "description": "NY Taxes (4.00%)",
                    "price": {"unit": "USD", "value": "5892", "string": " 4.36 USD"},
                },
                {
                    "type": "tax",
                    "name": "City Taxes",
                    "description": "NEW YORK Taxes (4.88%)",
                    "price": {"unit": "USD", "value": "5892", "string": " 5.32 USD"},
                },
                {
                    "type": "shipping",
                    "name": "Flat",
                    "description": "",
                    "price": {"unit": "USD", "value": "5892", "string": " 0.00 USD"},
                },
            ],
            "total": {"unit": "USD", "value": "5892", "string": " 118.73 USD"},
        },
        "downloadFiles": [
            {
                "id": "5e9a5eba75e0ac242e1b6f64",
                "name": "New product guide",
                "url": "https://webflow.com/dashboard/download-digital-product?payload=5d93ba5e38c6b0160ab711d3;e7634a;5eb1aac72912ec06f561278c;5e9a5eba75e0ac242e1b6f63:ka2nehxy:4a1ee0a632feaab94294350087215ed89533f2f530903e3b933b638940e921aa",
            }
        ],
    }
    expected_types: typing.Any = {
        "orderId": None,
        "status": None,
        "comment": None,
        "orderComment": None,
        "acceptedOn": "datetime",
        "fulfilledOn": "datetime",
        "refundedOn": "datetime",
        "disputedOn": "datetime",
        "disputeUpdatedOn": "datetime",
        "disputeLastStatus": None,
        "customerPaid": {"unit": None, "value": None, "string": None},
        "netAmount": {"unit": None, "value": None, "string": None},
        "applicationFee": {"unit": None, "value": None, "string": None},
        "allAddresses": (
            "list",
            {
                0: {
                    "type": None,
                    "japanType": None,
                    "addressee": None,
                    "line1": None,
                    "line2": None,
                    "city": None,
                    "state": None,
                    "country": None,
                    "postalCode": None,
                },
                1: {
                    "type": None,
                    "japanType": None,
                    "addressee": None,
                    "line1": None,
                    "line2": None,
                    "city": None,
                    "state": None,
                    "country": None,
                    "postalCode": None,
                },
            },
        ),
        "shippingAddress": {
            "type": None,
            "japanType": None,
            "addressee": None,
            "line1": None,
            "line2": None,
            "city": None,
            "state": None,
            "country": None,
            "postalCode": None,
        },
        "billingAddress": {
            "type": None,
            "japanType": None,
            "addressee": None,
            "line1": None,
            "line2": None,
            "city": None,
            "state": None,
            "country": None,
            "postalCode": None,
        },
        "shippingProvider": None,
        "shippingTracking": None,
        "shippingTrackingURL": None,
        "customerInfo": {"fullName": None, "email": None},
        "purchasedItems": (
            "list",
            {
                0: {
                    "count": None,
                    "rowTotal": {"unit": None, "value": None, "string": None},
                    "productId": None,
                    "productName": None,
                    "productSlug": None,
                    "variantId": None,
                    "variantName": None,
                    "variantSlug": None,
                    "variantSKU": None,
                    "variantImage": {"url": None},
                    "variantPrice": {"unit": None, "value": None, "string": None},
                    "weight": None,
                    "width": None,
                    "height": None,
                    "length": None,
                },
                1: {
                    "count": None,
                    "rowTotal": {"unit": None, "value": None, "string": None},
                    "productId": None,
                    "productName": None,
                    "productSlug": None,
                    "variantId": None,
                    "variantName": None,
                    "variantSlug": None,
                    "variantSKU": None,
                    "variantImage": {"url": None},
                    "variantPrice": {"unit": None, "value": None, "string": None},
                    "weight": None,
                    "width": None,
                    "height": None,
                    "length": None,
                },
            },
        ),
        "purchasedItemsCount": None,
        "stripeDetails": {
            "subscriptionId": None,
            "paymentMethod": None,
            "paymentIntentId": None,
            "customerId": None,
            "chargeId": None,
            "disputeId": None,
            "refundId": None,
            "refundReason": None,
        },
        "stripeCard": {"last4": None, "brand": None, "ownerName": None, "expires": {"year": None, "month": None}},
        "paypalDetails": {
            "orderId": None,
            "payerId": None,
            "captureId": None,
            "refundId": None,
            "refundReason": None,
            "disputeId": None,
        },
        "customData": ("list", {0: ("dict", {0: (None, None)})}),
        "metadata": {"isBuyNow": None},
        "isCustomerDeleted": None,
        "isShippingRequired": None,
        "hasDownloads": None,
        "paymentProcessor": None,
        "totals": {
            "subtotal": {"unit": None, "value": None, "string": None},
            "extras": (
                "list",
                {
                    0: {
                        "type": None,
                        "name": None,
                        "description": None,
                        "price": {"unit": None, "value": None, "string": None},
                    },
                    1: {
                        "type": None,
                        "name": None,
                        "description": None,
                        "price": {"unit": None, "value": None, "string": None},
                    },
                    2: {
                        "type": None,
                        "name": None,
                        "description": None,
                        "price": {"unit": None, "value": None, "string": None},
                    },
                },
            ),
            "total": {"unit": None, "value": None, "string": None},
        },
        "downloadFiles": ("list", {0: {"id": None, "name": None, "url": None}}),
    }
    response = client.orders.refund(site_id="580e63e98c9a982ac9b8b741", order_id="5e8518516e147040726cc415")
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.orders.refund(
        site_id="580e63e98c9a982ac9b8b741", order_id="5e8518516e147040726cc415"
    )
    validate_response(async_response, expected_response, expected_types)
