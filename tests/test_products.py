# This file was auto-generated by Fern from our API Definition.

from webflow import Webflow
from webflow import AsyncWebflow
import typing
from .utilities import validate_response
from webflow import Sku


async def test_list_(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "items": [
            {
                "product": {
                    "id": "660eb7a486d1d6e0412292d7",
                    "cmsLocaleId": "653ad57de882f528b32e810e",
                    "lastPublished": "2024-04-04T14:24:19Z",
                    "lastUpdated": "2024-04-04T14:30:19Z",
                    "createdOn": "2024-04-04T14:22:28Z",
                    "isArchived": False,
                    "isDraft": False,
                    "fieldData": {
                        "name": "T-Shirt",
                        "slug": "t-shirt",
                        "description": "A plain cotton t-shirt.",
                        "shippable": True,
                        "sku-properties": [
                            {
                                "id": "Color",
                                "name": "Color",
                                "enum": [{"id": "id", "name": "Royal Blue", "slug": "royal-blue"}],
                            }
                        ],
                    },
                },
                "skus": [
                    {
                        "id": "580e63fc8c9a982ac9b8b745",
                        "cmsLocaleId": "653ad57de882f528b32e810e",
                        "lastPublished": "2023-03-17T18:47:35Z",
                        "lastUpdated": "2023-03-17T18:47:35Z",
                        "createdOn": "2023-03-17T18:47:35Z",
                        "fieldData": {
                            "sku-values": {"ff42fee0113744f693a764e3431a9cc2": "64a74715c456e36762fc39a1"},
                            "name": "Blue T-shirt",
                            "slug": "t-shirt-blue",
                            "price": {"value": 100, "unit": "USD"},
                            "quantity": 10,
                        },
                    }
                ],
            }
        ],
        "pagination": {"limit": 100, "offset": 0, "total": 100},
    }
    expected_types: typing.Any = {
        "items": (
            "list",
            {
                0: {
                    "product": {
                        "id": None,
                        "cmsLocaleId": None,
                        "lastPublished": "datetime",
                        "lastUpdated": "datetime",
                        "createdOn": "datetime",
                        "isArchived": None,
                        "isDraft": None,
                        "fieldData": {
                            "name": None,
                            "slug": None,
                            "description": None,
                            "shippable": None,
                            "sku-properties": (
                                "list",
                                {
                                    0: {
                                        "id": None,
                                        "name": None,
                                        "enum": ("list", {0: {"id": None, "name": None, "slug": None}}),
                                    }
                                },
                            ),
                        },
                    },
                    "skus": (
                        "list",
                        {
                            0: {
                                "id": None,
                                "cmsLocaleId": None,
                                "lastPublished": "datetime",
                                "lastUpdated": "datetime",
                                "createdOn": "datetime",
                                "fieldData": {
                                    "sku-values": ("dict", {0: (None, None)}),
                                    "name": None,
                                    "slug": None,
                                    "price": {"value": None, "unit": None},
                                    "quantity": None,
                                },
                            }
                        },
                    ),
                }
            },
        ),
        "pagination": {"limit": None, "offset": None, "total": None},
    }
    response = client.products.list(site_id="580e63e98c9a982ac9b8b741")
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.products.list(site_id="580e63e98c9a982ac9b8b741")
    validate_response(async_response, expected_response, expected_types)


async def test_create(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "product": {
            "id": "660eb7a486d1d6e0412292d7",
            "cmsLocaleId": "653ad57de882f528b32e810e",
            "lastPublished": "2024-04-04T14:24:19Z",
            "lastUpdated": "2024-04-04T14:30:19Z",
            "createdOn": "2024-04-04T14:22:28Z",
            "isArchived": False,
            "isDraft": False,
            "fieldData": {
                "name": "T-Shirt",
                "slug": "t-shirt",
                "description": "A plain cotton t-shirt.",
                "shippable": True,
                "sku-properties": [
                    {"id": "Color", "name": "Color", "enum": [{"id": "id", "name": "Royal Blue", "slug": "royal-blue"}]}
                ],
                "categories": ["categories"],
                "tax-category": "standard-taxable",
                "default-sku": "default-sku",
                "ec-product-type": "ff42fee0113744f693a764e3431a9cc2",
            },
        },
        "skus": [
            {
                "id": "580e63fc8c9a982ac9b8b745",
                "cmsLocaleId": "653ad57de882f528b32e810e",
                "lastPublished": "2023-03-17T18:47:35Z",
                "lastUpdated": "2023-03-17T18:47:35Z",
                "createdOn": "2023-03-17T18:47:35Z",
                "fieldData": {
                    "sku-values": {"ff42fee0113744f693a764e3431a9cc2": "64a74715c456e36762fc39a1"},
                    "name": "Blue T-shirt",
                    "slug": "t-shirt-blue",
                    "price": {"value": 100, "unit": "USD"},
                    "quantity": 10,
                },
            }
        ],
    }
    expected_types: typing.Any = {
        "product": {
            "id": None,
            "cmsLocaleId": None,
            "lastPublished": "datetime",
            "lastUpdated": "datetime",
            "createdOn": "datetime",
            "isArchived": None,
            "isDraft": None,
            "fieldData": {
                "name": None,
                "slug": None,
                "description": None,
                "shippable": None,
                "sku-properties": (
                    "list",
                    {0: {"id": None, "name": None, "enum": ("list", {0: {"id": None, "name": None, "slug": None}})}},
                ),
                "categories": ("list", {0: None}),
                "tax-category": None,
                "default-sku": None,
                "ec-product-type": None,
            },
        },
        "skus": (
            "list",
            {
                0: {
                    "id": None,
                    "cmsLocaleId": None,
                    "lastPublished": "datetime",
                    "lastUpdated": "datetime",
                    "createdOn": "datetime",
                    "fieldData": {
                        "sku-values": ("dict", {0: (None, None)}),
                        "name": None,
                        "slug": None,
                        "price": {"value": None, "unit": None},
                        "quantity": None,
                    },
                }
            },
        ),
    }
    response = client.products.create(site_id="580e63e98c9a982ac9b8b741")
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.products.create(site_id="580e63e98c9a982ac9b8b741")
    validate_response(async_response, expected_response, expected_types)


async def test_get(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "product": {
            "id": "660eb7a486d1d6e0412292d7",
            "cmsLocaleId": "653ad57de882f528b32e810e",
            "lastPublished": "2024-04-04T14:24:19Z",
            "lastUpdated": "2024-04-04T14:30:19Z",
            "createdOn": "2024-04-04T14:22:28Z",
            "isArchived": False,
            "isDraft": False,
            "fieldData": {
                "name": "T-Shirt",
                "slug": "t-shirt",
                "description": "A plain cotton t-shirt.",
                "shippable": True,
                "sku-properties": [
                    {"id": "Color", "name": "Color", "enum": [{"id": "id", "name": "Royal Blue", "slug": "royal-blue"}]}
                ],
                "categories": ["categories"],
                "tax-category": "standard-taxable",
                "default-sku": "default-sku",
                "ec-product-type": "ff42fee0113744f693a764e3431a9cc2",
            },
        },
        "skus": [
            {
                "id": "580e63fc8c9a982ac9b8b745",
                "cmsLocaleId": "653ad57de882f528b32e810e",
                "lastPublished": "2023-03-17T18:47:35Z",
                "lastUpdated": "2023-03-17T18:47:35Z",
                "createdOn": "2023-03-17T18:47:35Z",
                "fieldData": {
                    "sku-values": {"ff42fee0113744f693a764e3431a9cc2": "64a74715c456e36762fc39a1"},
                    "name": "Blue T-shirt",
                    "slug": "t-shirt-blue",
                    "price": {"value": 100, "unit": "USD"},
                    "quantity": 10,
                },
            }
        ],
    }
    expected_types: typing.Any = {
        "product": {
            "id": None,
            "cmsLocaleId": None,
            "lastPublished": "datetime",
            "lastUpdated": "datetime",
            "createdOn": "datetime",
            "isArchived": None,
            "isDraft": None,
            "fieldData": {
                "name": None,
                "slug": None,
                "description": None,
                "shippable": None,
                "sku-properties": (
                    "list",
                    {0: {"id": None, "name": None, "enum": ("list", {0: {"id": None, "name": None, "slug": None}})}},
                ),
                "categories": ("list", {0: None}),
                "tax-category": None,
                "default-sku": None,
                "ec-product-type": None,
            },
        },
        "skus": (
            "list",
            {
                0: {
                    "id": None,
                    "cmsLocaleId": None,
                    "lastPublished": "datetime",
                    "lastUpdated": "datetime",
                    "createdOn": "datetime",
                    "fieldData": {
                        "sku-values": ("dict", {0: (None, None)}),
                        "name": None,
                        "slug": None,
                        "price": {"value": None, "unit": None},
                        "quantity": None,
                    },
                }
            },
        ),
    }
    response = client.products.get(site_id="580e63e98c9a982ac9b8b741", product_id="580e63fc8c9a982ac9b8b745")
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.products.get(
        site_id="580e63e98c9a982ac9b8b741", product_id="580e63fc8c9a982ac9b8b745"
    )
    validate_response(async_response, expected_response, expected_types)


async def test_update(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "id": "660eb7a486d1d6e0412292d7",
        "cmsLocaleId": "653ad57de882f528b32e810e",
        "lastPublished": "2024-04-04T14:24:19Z",
        "lastUpdated": "2024-04-04T14:30:19Z",
        "createdOn": "2024-04-04T14:22:28Z",
        "isArchived": False,
        "isDraft": False,
        "fieldData": {
            "name": "T-Shirt",
            "slug": "t-shirt",
            "description": "A plain cotton t-shirt.",
            "shippable": True,
            "sku-properties": [
                {"id": "Color", "name": "Color", "enum": [{"id": "id", "name": "Royal Blue", "slug": "royal-blue"}]}
            ],
            "categories": ["categories"],
            "tax-category": "standard-taxable",
            "default-sku": "default-sku",
            "ec-product-type": "ff42fee0113744f693a764e3431a9cc2",
        },
    }
    expected_types: typing.Any = {
        "id": None,
        "cmsLocaleId": None,
        "lastPublished": "datetime",
        "lastUpdated": "datetime",
        "createdOn": "datetime",
        "isArchived": None,
        "isDraft": None,
        "fieldData": {
            "name": None,
            "slug": None,
            "description": None,
            "shippable": None,
            "sku-properties": (
                "list",
                {0: {"id": None, "name": None, "enum": ("list", {0: {"id": None, "name": None, "slug": None}})}},
            ),
            "categories": ("list", {0: None}),
            "tax-category": None,
            "default-sku": None,
            "ec-product-type": None,
        },
    }
    response = client.products.update(site_id="580e63e98c9a982ac9b8b741", product_id="580e63fc8c9a982ac9b8b745")
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.products.update(
        site_id="580e63e98c9a982ac9b8b741", product_id="580e63fc8c9a982ac9b8b745"
    )
    validate_response(async_response, expected_response, expected_types)


async def test_create_sku(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "skus": [
            {
                "id": "580e63fc8c9a982ac9b8b745",
                "cmsLocaleId": "653ad57de882f528b32e810e",
                "lastPublished": "2023-03-17T18:47:35Z",
                "lastUpdated": "2023-03-17T18:47:35Z",
                "createdOn": "2023-03-17T18:47:35Z",
                "fieldData": {
                    "sku-values": {"ff42fee0113744f693a764e3431a9cc2": "64a74715c456e36762fc39a1"},
                    "name": "Blue T-shirt",
                    "slug": "t-shirt-blue",
                    "price": {"value": 100, "unit": "USD"},
                    "quantity": 10,
                },
            }
        ]
    }
    expected_types: typing.Any = {
        "skus": (
            "list",
            {
                0: {
                    "id": None,
                    "cmsLocaleId": None,
                    "lastPublished": "datetime",
                    "lastUpdated": "datetime",
                    "createdOn": "datetime",
                    "fieldData": {
                        "sku-values": ("dict", {0: (None, None)}),
                        "name": None,
                        "slug": None,
                        "price": {"value": None, "unit": None},
                        "quantity": None,
                    },
                }
            },
        )
    }
    response = client.products.create_sku(
        site_id="580e63e98c9a982ac9b8b741", product_id="580e63fc8c9a982ac9b8b745", skus=[Sku()]
    )
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.products.create_sku(
        site_id="580e63e98c9a982ac9b8b741", product_id="580e63fc8c9a982ac9b8b745", skus=[Sku()]
    )
    validate_response(async_response, expected_response, expected_types)


async def test_update_sku(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "id": "580e63fc8c9a982ac9b8b745",
        "cmsLocaleId": "653ad57de882f528b32e810e",
        "lastPublished": "2023-03-17T18:47:35Z",
        "lastUpdated": "2023-03-17T18:47:35Z",
        "createdOn": "2023-03-17T18:47:35Z",
        "fieldData": {
            "sku-values": {"ff42fee0113744f693a764e3431a9cc2": "64a74715c456e36762fc39a1"},
            "name": "Blue T-shirt",
            "slug": "t-shirt-blue",
            "price": {"value": 100, "unit": "USD"},
            "compare-at-price": {"value": 100, "unit": "USD"},
            "ec-sku-billing-method": "one-time",
            "ec-sku-subscription-plan": {"interval": "day", "frequency": 1, "trial": 7, "plans": [{}]},
            "track-inventory": True,
            "quantity": 10,
        },
    }
    expected_types: typing.Any = {
        "id": None,
        "cmsLocaleId": None,
        "lastPublished": "datetime",
        "lastUpdated": "datetime",
        "createdOn": "datetime",
        "fieldData": {
            "sku-values": ("dict", {0: (None, None)}),
            "name": None,
            "slug": None,
            "price": {"value": None, "unit": None},
            "compare-at-price": {"value": None, "unit": None},
            "ec-sku-billing-method": None,
            "ec-sku-subscription-plan": {
                "interval": None,
                "frequency": None,
                "trial": None,
                "plans": ("list", {0: {}}),
            },
            "track-inventory": None,
            "quantity": None,
        },
    }
    response = client.products.update_sku(
        site_id="580e63e98c9a982ac9b8b741",
        product_id="580e63fc8c9a982ac9b8b745",
        sku_id="5e8518516e147040726cc415",
        sku=Sku(),
    )
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.products.update_sku(
        site_id="580e63e98c9a982ac9b8b741",
        product_id="580e63fc8c9a982ac9b8b745",
        sku_id="5e8518516e147040726cc415",
        sku=Sku(),
    )
    validate_response(async_response, expected_response, expected_types)
