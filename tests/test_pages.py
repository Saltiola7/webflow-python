# This file was auto-generated by Fern from our API Definition.

from webflow import Webflow
from webflow import AsyncWebflow
import typing
from .utilities import validate_response
import datetime
from webflow import PageSeo
from webflow import PageOpenGraph
from webflow import TextNodeWrite
from webflow import ComponentInstanceNodePropertyOverridesWrite
from webflow import ComponentInstanceNodePropertyOverridesWritePropertyOverridesItem


async def test_list_(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "pages": [
            {
                "id": "6596da6045e56dee495bcbba",
                "siteId": "6258612d1ee792848f805dcf",
                "title": "Guide to the Galaxy",
                "slug": "guide-to-the-galaxy",
                "parentId": "6419db964a9c435aa3af6251",
                "collectionId": "6390c49774a71f12831a08e3",
                "createdOn": "2024-03-11T10:42:00Z",
                "lastUpdated": "2024-03-11T10:42:42Z",
                "archived": False,
                "draft": False,
                "canBranch": True,
                "isBranch": False,
                "isMembersOnly": False,
                "seo": {
                    "title": "The Ultimate Hitchhiker's Guide to the Galaxy",
                    "description": "Everything you need to know about the galaxy, from avoiding Vogon poetry to the importance of towels.",
                },
                "openGraph": {
                    "title": "Explore the Cosmos with The Ultimate Guide",
                    "titleCopied": False,
                    "description": "Dive deep into the mysteries of the universe with your guide to everything galactic.",
                    "descriptionCopied": False,
                },
                "localeId": "653fd9af6a07fc9cfd7a5e57",
                "publishedPath": "/en-us/guide-to-the-galaxy",
            },
            {
                "id": "6596da6045e56dee495bcbad",
                "siteId": "6258612d1ee792848f805dcf",
                "title": "Towel Day Celebrations",
                "slug": "towel-day",
                "parentId": "6419db964a9c435aa3af6251",
                "collectionId": "6390c49774a71f12831a08e3",
                "createdOn": "2024-05-25T09:00:00Z",
                "lastUpdated": "2024-05-25T09:42:00Z",
                "archived": False,
                "draft": False,
                "canBranch": True,
                "isBranch": False,
                "isMembersOnly": False,
                "seo": {
                    "title": "Celebrate Towel Day - The Hitchhiker's Guide to the Galaxy",
                    "description": "A guide to celebrating Towel Day, in honor of the most massively useful thing an interstellar hitchhiker can have.",
                },
                "openGraph": {
                    "title": "Towel Day - Don't Panic",
                    "titleCopied": False,
                    "description": "Join the galaxy in celebrating Towel Day, the day dedicated to carrying towels everywhere in memory of Douglas Adams.",
                    "descriptionCopied": False,
                },
                "localeId": "653fd9af6a07fc9cfd7a5e57",
                "publishedPath": "/en-us/towel-day",
            },
        ],
        "pagination": {"limit": 20, "offset": 0, "total": 2},
    }
    expected_types: typing.Any = {
        "pages": (
            "list",
            {
                0: {
                    "id": None,
                    "siteId": None,
                    "title": None,
                    "slug": None,
                    "parentId": None,
                    "collectionId": None,
                    "createdOn": "datetime",
                    "lastUpdated": "datetime",
                    "archived": None,
                    "draft": None,
                    "canBranch": None,
                    "isBranch": None,
                    "isMembersOnly": None,
                    "seo": {"title": None, "description": None},
                    "openGraph": {"title": None, "titleCopied": None, "description": None, "descriptionCopied": None},
                    "localeId": None,
                    "publishedPath": None,
                },
                1: {
                    "id": None,
                    "siteId": None,
                    "title": None,
                    "slug": None,
                    "parentId": None,
                    "collectionId": None,
                    "createdOn": "datetime",
                    "lastUpdated": "datetime",
                    "archived": None,
                    "draft": None,
                    "canBranch": None,
                    "isBranch": None,
                    "isMembersOnly": None,
                    "seo": {"title": None, "description": None},
                    "openGraph": {"title": None, "titleCopied": None, "description": None, "descriptionCopied": None},
                    "localeId": None,
                    "publishedPath": None,
                },
            },
        ),
        "pagination": {"limit": None, "offset": None, "total": None},
    }
    response = client.pages.list(site_id="580e63e98c9a982ac9b8b741", locale_id="65427cf400e02b306eaa04a0")
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.pages.list(
        site_id="580e63e98c9a982ac9b8b741", locale_id="65427cf400e02b306eaa04a0"
    )
    validate_response(async_response, expected_response, expected_types)


async def test_get_metadata(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "id": "6596da6045e56dee495bcbba",
        "siteId": "6258612d1ee792848f805dcf",
        "title": "Guide to the Galaxy",
        "slug": "guide-to-the-galaxy",
        "parentId": "6419db964a9c435aa3af6251",
        "collectionId": "6390c49774a71f12831a08e3",
        "createdOn": "2024-03-11T10:42:00Z",
        "lastUpdated": "2024-03-11T10:42:42Z",
        "archived": False,
        "draft": False,
        "canBranch": True,
        "isBranch": False,
        "isMembersOnly": False,
        "seo": {
            "title": "The Ultimate Hitchhiker's Guide to the Galaxy",
            "description": "Everything you need to know about the galaxy, from avoiding Vogon poetry to the importance of towels.",
        },
        "openGraph": {
            "title": "Explore the Cosmos with The Ultimate Guide",
            "titleCopied": False,
            "description": "Dive deep into the mysteries of the universe with your guide to everything galactic.",
            "descriptionCopied": False,
        },
        "localeId": "653fd9af6a07fc9cfd7a5e57",
        "publishedPath": "/en-us/guide-to-the-galaxy",
    }
    expected_types: typing.Any = {
        "id": None,
        "siteId": None,
        "title": None,
        "slug": None,
        "parentId": None,
        "collectionId": None,
        "createdOn": "datetime",
        "lastUpdated": "datetime",
        "archived": None,
        "draft": None,
        "canBranch": None,
        "isBranch": None,
        "isMembersOnly": None,
        "seo": {"title": None, "description": None},
        "openGraph": {"title": None, "titleCopied": None, "description": None, "descriptionCopied": None},
        "localeId": None,
        "publishedPath": None,
    }
    response = client.pages.get_metadata(page_id="63c720f9347c2139b248e552", locale_id="65427cf400e02b306eaa04a0")
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.pages.get_metadata(
        page_id="63c720f9347c2139b248e552", locale_id="65427cf400e02b306eaa04a0"
    )
    validate_response(async_response, expected_response, expected_types)


async def test_update_page_settings(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "id": "6596da6045e56dee495bcbba",
        "siteId": "6258612d1ee792848f805dcf",
        "title": "Guide to the Galaxy",
        "slug": "guide-to-the-galaxy",
        "parentId": "6419db964a9c435aa3af6251",
        "collectionId": "6390c49774a71f12831a08e3",
        "createdOn": "2024-03-11T10:42:00Z",
        "lastUpdated": "2024-03-11T10:42:42Z",
        "archived": False,
        "draft": False,
        "canBranch": True,
        "isBranch": False,
        "isMembersOnly": False,
        "seo": {
            "title": "The Ultimate Hitchhiker's Guide to the Galaxy",
            "description": "Everything you need to know about the galaxy, from avoiding Vogon poetry to the importance of towels.",
        },
        "openGraph": {
            "title": "Explore the Cosmos with The Ultimate Guide",
            "titleCopied": False,
            "description": "Dive deep into the mysteries of the universe with your guide to everything galactic.",
            "descriptionCopied": False,
        },
        "localeId": "653fd9af6a07fc9cfd7a5e57",
        "publishedPath": "/en-us/guide-to-the-galaxy",
    }
    expected_types: typing.Any = {
        "id": None,
        "siteId": None,
        "title": None,
        "slug": None,
        "parentId": None,
        "collectionId": None,
        "createdOn": "datetime",
        "lastUpdated": "datetime",
        "archived": None,
        "draft": None,
        "canBranch": None,
        "isBranch": None,
        "isMembersOnly": None,
        "seo": {"title": None, "description": None},
        "openGraph": {"title": None, "titleCopied": None, "description": None, "descriptionCopied": None},
        "localeId": None,
        "publishedPath": None,
    }
    response = client.pages.update_page_settings(
        page_id="63c720f9347c2139b248e552",
        locale_id="65427cf400e02b306eaa04a0",
        id="6596da6045e56dee495bcbba",
        site_id="6258612d1ee792848f805dcf",
        title="Guide to the Galaxy",
        slug="guide-to-the-galaxy",
        created_on=datetime.datetime.fromisoformat("2024-03-11 10:42:00+00:00"),
        last_updated=datetime.datetime.fromisoformat("2024-03-11 10:42:42+00:00"),
        archived=False,
        draft=False,
        can_branch=True,
        is_branch=False,
        seo=PageSeo(
            title="The Ultimate Hitchhiker's Guide to the Galaxy",
            description="Everything you need to know about the galaxy, from avoiding Vogon poetry to the importance of towels.",
        ),
        open_graph=PageOpenGraph(
            title="Explore the Cosmos with The Ultimate Guide",
            title_copied=False,
            description="Dive deep into the mysteries of the universe with your guide to everything galactic.",
            description_copied=False,
        ),
        page_locale_id="653fd9af6a07fc9cfd7a5e57",
        published_path="/en-us/guide-to-the-galaxy",
    )
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.pages.update_page_settings(
        page_id="63c720f9347c2139b248e552",
        locale_id="65427cf400e02b306eaa04a0",
        id="6596da6045e56dee495bcbba",
        site_id="6258612d1ee792848f805dcf",
        title="Guide to the Galaxy",
        slug="guide-to-the-galaxy",
        created_on=datetime.datetime.fromisoformat("2024-03-11 10:42:00+00:00"),
        last_updated=datetime.datetime.fromisoformat("2024-03-11 10:42:42+00:00"),
        archived=False,
        draft=False,
        can_branch=True,
        is_branch=False,
        seo=PageSeo(
            title="The Ultimate Hitchhiker's Guide to the Galaxy",
            description="Everything you need to know about the galaxy, from avoiding Vogon poetry to the importance of towels.",
        ),
        open_graph=PageOpenGraph(
            title="Explore the Cosmos with The Ultimate Guide",
            title_copied=False,
            description="Dive deep into the mysteries of the universe with your guide to everything galactic.",
            description_copied=False,
        ),
        page_locale_id="653fd9af6a07fc9cfd7a5e57",
        published_path="/en-us/guide-to-the-galaxy",
    )
    validate_response(async_response, expected_response, expected_types)


async def test_get_content(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "pageId": "658205daa3e8206a523b5ad4",
        "nodes": [
            {
                "type": "component-instance",
                "id": "a245c12d-995b-55ee-5ec7-aa36a6cad623",
                "componentId": "nodes",
                "propertyOverrides": [{"propertyId": "7dd14c08-2e96-8d3d-2b19-b5c03642a0f0"}],
            },
            {
                "type": "component-instance",
                "id": "a245c12d-995b-55ee-5ec7-aa36a6cad627",
                "componentId": "nodes",
                "propertyOverrides": [{"propertyId": "7dd14c08-2e96-8d3d-2b19-b5c03642a0f0"}],
            },
            {
                "type": "component-instance",
                "id": "a245c12d-995b-55ee-5ec7-aa36a6cad629",
                "componentId": "nodes",
                "propertyOverrides": [{"propertyId": "7dd14c08-2e96-8d3d-2b19-b5c03642a0f0"}],
            },
            {
                "type": "component-instance",
                "id": "a245c12d-995b-55ee-5ec7-aa36a6cad631",
                "componentId": "6258612d1ee792848f805dcf",
                "propertyOverrides": [
                    {
                        "propertyId": "a245c12d-995b-55ee-5ec7-aa36a6cad633",
                        "type": "Plain Text",
                        "label": "Catchphrase",
                        "text": {"text": "Don't Panic!"},
                    },
                    {
                        "propertyId": "a245c12d-995b-55ee-5ec7-aa36a6cad635",
                        "type": "Rich Text",
                        "label": "Tagline",
                        "text": {"html": "<div><p>Always know where your towel is.</p></div>"},
                    },
                ],
            },
        ],
        "pagination": {"limit": 4, "offset": 0, "total": 4},
    }
    expected_types: typing.Any = {
        "pageId": None,
        "nodes": ("list", {0: "no_validate", 1: "no_validate", 2: "no_validate", 3: "no_validate"}),
        "pagination": {"limit": None, "offset": None, "total": None},
    }
    response = client.pages.get_content(page_id="63c720f9347c2139b248e552", locale_id="65427cf400e02b306eaa04a0")
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.pages.get_content(
        page_id="63c720f9347c2139b248e552", locale_id="65427cf400e02b306eaa04a0"
    )
    validate_response(async_response, expected_response, expected_types)


async def test_update_static_content(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {"errors": ["errors"]}
    expected_types: typing.Any = {"errors": ("list", {0: None})}
    response = client.pages.update_static_content(
        page_id="63c720f9347c2139b248e552",
        locale_id="localeId",
        nodes=[
            TextNodeWrite(
                node_id="a245c12d-995b-55ee-5ec7-aa36a6cad623", text="<h1>The Hitchhiker's Guide to the Galaxy</h1>"
            ),
            TextNodeWrite(
                node_id="a245c12d-995b-55ee-5ec7-aa36a6cad627",
                text="<div><h3>Don't Panic!</h3><p>Always know where your towel is.</p></div>",
            ),
            ComponentInstanceNodePropertyOverridesWrite(
                node_id="a245c12d-995b-55ee-5ec7-aa36a6cad629",
                property_overrides=[
                    ComponentInstanceNodePropertyOverridesWritePropertyOverridesItem(
                        property_id="7dd14c08-2e96-8d3d-2b19-b5c03642a0f0",
                        text="<div><h1>Time is an <em>illusion</em></h1></div>",
                    ),
                    ComponentInstanceNodePropertyOverridesWritePropertyOverridesItem(
                        property_id="7dd14c08-2e96-8d3d-2b19-b5c03642a0f1", text="Life, the Universe and Everything"
                    ),
                ],
            ),
        ],
    )
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.pages.update_static_content(
        page_id="63c720f9347c2139b248e552",
        locale_id="localeId",
        nodes=[
            TextNodeWrite(
                node_id="a245c12d-995b-55ee-5ec7-aa36a6cad623", text="<h1>The Hitchhiker's Guide to the Galaxy</h1>"
            ),
            TextNodeWrite(
                node_id="a245c12d-995b-55ee-5ec7-aa36a6cad627",
                text="<div><h3>Don't Panic!</h3><p>Always know where your towel is.</p></div>",
            ),
            ComponentInstanceNodePropertyOverridesWrite(
                node_id="a245c12d-995b-55ee-5ec7-aa36a6cad629",
                property_overrides=[
                    ComponentInstanceNodePropertyOverridesWritePropertyOverridesItem(
                        property_id="7dd14c08-2e96-8d3d-2b19-b5c03642a0f0",
                        text="<div><h1>Time is an <em>illusion</em></h1></div>",
                    ),
                    ComponentInstanceNodePropertyOverridesWritePropertyOverridesItem(
                        property_id="7dd14c08-2e96-8d3d-2b19-b5c03642a0f1", text="Life, the Universe and Everything"
                    ),
                ],
            ),
        ],
    )
    validate_response(async_response, expected_response, expected_types)
