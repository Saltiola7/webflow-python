# This file was auto-generated by Fern from our API Definition.

from webflow import Webflow
from webflow import AsyncWebflow
import typing
from .utilities import validate_response


async def test_create(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "id": "670ecf86817e3cc7a510eb6a",
        "workspaceId": "625860a7a6c16d624927122f",
        "createdOn": "2024-10-15T20:24:38Z",
        "displayName": "The Hitchikerâ€˜s Guide",
        "shortName": "hitchikers-guide",
        "lastPublished": "2016-10-24T19:43:17Z",
        "lastUpdated": "2024-10-15T20:24:38Z",
        "previewUrl": "https://d1otoma47x30pg.cloudfront.net/580e63e98c9a982ac9b8b741/201610241243.png",
        "timeZone": "America/Los_Angeles",
        "parentFolderId": "670ece123598db72d9648be1",
        "customDomains": [
            {"id": "589a331aa51e760df7ccb89d", "url": "test-api-domain.com", "lastPublished": "2022-12-07T16:51:37Z"}
        ],
        "locales": {
            "primary": {
                "id": "653fd9af6a07fc9cfd7a5e57",
                "cmsLocaleId": "653ad57de882f528b32e810e",
                "enabled": False,
                "displayName": "English (United States)",
                "displayImageId": "displayImageId",
                "redirect": True,
                "subdirectory": "",
                "tag": "en-US",
            },
            "secondary": [
                {
                    "id": "653fd9af6a07fc9cfd7a5e57",
                    "cmsLocaleId": "653ad57de882f528b32e810e",
                    "enabled": False,
                    "displayName": "English (United States)",
                    "redirect": True,
                    "subdirectory": "",
                    "tag": "en-US",
                }
            ],
        },
        "dataCollectionEnabled": False,
        "dataCollectionType": "always",
    }
    expected_types: typing.Any = {
        "id": None,
        "workspaceId": None,
        "createdOn": "datetime",
        "displayName": None,
        "shortName": None,
        "lastPublished": "datetime",
        "lastUpdated": "datetime",
        "previewUrl": None,
        "timeZone": None,
        "parentFolderId": None,
        "customDomains": ("list", {0: {"id": None, "url": None, "lastPublished": "datetime"}}),
        "locales": {
            "primary": {
                "id": None,
                "cmsLocaleId": None,
                "enabled": None,
                "displayName": None,
                "displayImageId": None,
                "redirect": None,
                "subdirectory": None,
                "tag": None,
            },
            "secondary": (
                "list",
                {
                    0: {
                        "id": None,
                        "cmsLocaleId": None,
                        "enabled": None,
                        "displayName": None,
                        "redirect": None,
                        "subdirectory": None,
                        "tag": None,
                    }
                },
            ),
        },
        "dataCollectionEnabled": None,
        "dataCollectionType": None,
    }
    response = client.sites.create(workspace_id="580e63e98c9a982ac9b8b741", name="The Hitchhiker's Guide to the Galaxy")
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.sites.create(
        workspace_id="580e63e98c9a982ac9b8b741", name="The Hitchhiker's Guide to the Galaxy"
    )
    validate_response(async_response, expected_response, expected_types)


async def test_list_(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "sites": [
            {
                "id": "42e63e98c9a982ac9b8b741",
                "workspaceId": "42e63fc8c9a982ac9b8b744",
                "createdOn": "1979-10-12T12:00:00Z",
                "displayName": "Heart of Gold Spaceship",
                "shortName": "heart-of-gold",
                "lastPublished": "2023-04-02T12:42:00Z",
                "lastUpdated": "2016-10-24T19:43:17Z",
                "previewUrl": "https://d1otoma47x30pg.cloudfront.net/42e63e98c9a982ac9b8b741/197910121200.png",
                "timeZone": "DeepSpace/InfiniteImprobability",
                "parentFolderId": "1as2d3f4g5h6j7k8l9z0x1c2v3b4n5m6",
                "customDomains": [
                    {
                        "id": "589a331aa51e760df7ccb89e",
                        "url": "heartofgold.galaxy",
                        "lastPublished": "2022-12-07T16:51:37Z",
                    }
                ],
                "locales": {
                    "primary": {
                        "id": "653fd9af6a07fc9cfd7a5e57",
                        "cmsLocaleId": "653ad57de882f528b32e810e",
                        "enabled": True,
                        "displayName": "English - Heart of Gold Standard",
                        "redirect": False,
                        "subdirectory": "/en",
                        "tag": "The Ultimate Answer",
                    },
                    "secondary": [
                        {
                            "id": "653fd9af6a07fc9cfd7a5e58",
                            "cmsLocaleId": "653ad57de882f528b32e810g",
                            "enabled": True,
                            "displayName": "Betelgeusian - Vogon Liaison",
                            "redirect": True,
                            "subdirectory": "/bet",
                            "tag": "Vogon",
                        },
                        {
                            "id": "653fd9af6a07fc9cfd7a5e59",
                            "cmsLocaleId": "653ad57de882f528b32e810h",
                            "enabled": False,
                            "displayName": "Magrathean - Custom Planet Designs",
                            "redirect": True,
                            "subdirectory": "/mg",
                            "tag": "Magrathean",
                        },
                    ],
                },
                "dataCollectionEnabled": True,
                "dataCollectionType": "always",
            },
            {
                "id": "42e63e98c9a982ac9b8b742",
                "workspaceId": "42e63fc8c9a982ac9b8b745",
                "createdOn": "1981-10-12T12:00:00Z",
                "displayName": "Marvin's Personal Blog",
                "shortName": "paranoid-android",
                "lastPublished": "2023-04-02T12:45:00Z",
                "lastUpdated": "2016-10-24T19:43:17Z",
                "previewUrl": "https://d1otoma47x30pg.cloudfront.net/42e63e98c9a982ac9b8b742/198110121200.png",
                "timeZone": "DeepSpace/Depression",
                "parentFolderId": "1as2d3f4g5h6j7k8l9z0x1c2v3b4n5m6",
                "customDomains": [
                    {"id": "589a331aa51e760df7ccb89f", "url": "marvin.blog", "lastPublished": "2022-12-07T16:51:37Z"}
                ],
                "locales": {
                    "primary": {
                        "id": "653fd9af6a07fc9cfd7a5e57",
                        "cmsLocaleId": "653ad57de882f528b32e810e",
                        "enabled": True,
                        "displayName": "English - Marvin's Musings",
                        "redirect": False,
                        "subdirectory": "/en",
                        "tag": "English",
                    },
                    "secondary": [
                        {
                            "id": "653fd9af6a07fc9cfd7a5e56",
                            "cmsLocaleId": "653ad57de882f528b32e810f",
                            "enabled": True,
                            "displayName": "Squornshellous - Mattress Speak",
                            "redirect": True,
                            "subdirectory": "/sr",
                            "tag": "Squornshellous",
                        }
                    ],
                },
                "dataCollectionEnabled": True,
                "dataCollectionType": "always",
            },
            {
                "id": "42e63e98c9a982ac9b8b743",
                "workspaceId": "42e63fc8c9a982ac9b8b746",
                "createdOn": "1982-10-12T12:00:00Z",
                "displayName": "Vogon Poetry Archive",
                "shortName": "vogon-poetry",
                "lastPublished": "2023-04-02T12:50:00Z",
                "lastUpdated": "2016-10-24T19:43:17Z",
                "previewUrl": "https://d1otoma47x30pg.cloudfront.net/42e63e98c9a982ac9b8b743/198210121200.png",
                "timeZone": "Vogsphere/PoetryHall",
                "parentFolderId": "1as2d3f4g5h6j7k8l9z0x1c2v3b4n5m6",
                "customDomains": [
                    {
                        "id": "589a331aa51e760df7ccb8a0",
                        "url": "vogonpoetry.galaxy",
                        "lastPublished": "2022-12-07T16:51:37Z",
                    }
                ],
                "locales": {
                    "primary": {
                        "id": "653fd9af6a07fc9cfd7a5e55",
                        "cmsLocaleId": "653ad57de882f528b32e810d",
                        "enabled": True,
                        "displayName": "English - Vogon Verse",
                        "redirect": False,
                        "subdirectory": "/en",
                        "tag": "Third Worst Poetry",
                    },
                    "secondary": [
                        {
                            "id": "653fd9af6a07fc9cfd7a5e54",
                            "cmsLocaleId": "653ad57de882f528b32e810c",
                            "enabled": True,
                            "displayName": "Galactic - Universal Language",
                            "redirect": True,
                            "subdirectory": "/gl",
                            "tag": "Pan-Galactic Gargle Blaster",
                        }
                    ],
                },
                "dataCollectionEnabled": True,
                "dataCollectionType": "always",
            },
        ]
    }
    expected_types: typing.Any = {
        "sites": (
            "list",
            {
                0: {
                    "id": None,
                    "workspaceId": None,
                    "createdOn": "datetime",
                    "displayName": None,
                    "shortName": None,
                    "lastPublished": "datetime",
                    "lastUpdated": "datetime",
                    "previewUrl": None,
                    "timeZone": None,
                    "parentFolderId": None,
                    "customDomains": ("list", {0: {"id": None, "url": None, "lastPublished": "datetime"}}),
                    "locales": {
                        "primary": {
                            "id": None,
                            "cmsLocaleId": None,
                            "enabled": None,
                            "displayName": None,
                            "redirect": None,
                            "subdirectory": None,
                            "tag": None,
                        },
                        "secondary": (
                            "list",
                            {
                                0: {
                                    "id": None,
                                    "cmsLocaleId": None,
                                    "enabled": None,
                                    "displayName": None,
                                    "redirect": None,
                                    "subdirectory": None,
                                    "tag": None,
                                },
                                1: {
                                    "id": None,
                                    "cmsLocaleId": None,
                                    "enabled": None,
                                    "displayName": None,
                                    "redirect": None,
                                    "subdirectory": None,
                                    "tag": None,
                                },
                            },
                        ),
                    },
                    "dataCollectionEnabled": None,
                    "dataCollectionType": None,
                },
                1: {
                    "id": None,
                    "workspaceId": None,
                    "createdOn": "datetime",
                    "displayName": None,
                    "shortName": None,
                    "lastPublished": "datetime",
                    "lastUpdated": "datetime",
                    "previewUrl": None,
                    "timeZone": None,
                    "parentFolderId": None,
                    "customDomains": ("list", {0: {"id": None, "url": None, "lastPublished": "datetime"}}),
                    "locales": {
                        "primary": {
                            "id": None,
                            "cmsLocaleId": None,
                            "enabled": None,
                            "displayName": None,
                            "redirect": None,
                            "subdirectory": None,
                            "tag": None,
                        },
                        "secondary": (
                            "list",
                            {
                                0: {
                                    "id": None,
                                    "cmsLocaleId": None,
                                    "enabled": None,
                                    "displayName": None,
                                    "redirect": None,
                                    "subdirectory": None,
                                    "tag": None,
                                }
                            },
                        ),
                    },
                    "dataCollectionEnabled": None,
                    "dataCollectionType": None,
                },
                2: {
                    "id": None,
                    "workspaceId": None,
                    "createdOn": "datetime",
                    "displayName": None,
                    "shortName": None,
                    "lastPublished": "datetime",
                    "lastUpdated": "datetime",
                    "previewUrl": None,
                    "timeZone": None,
                    "parentFolderId": None,
                    "customDomains": ("list", {0: {"id": None, "url": None, "lastPublished": "datetime"}}),
                    "locales": {
                        "primary": {
                            "id": None,
                            "cmsLocaleId": None,
                            "enabled": None,
                            "displayName": None,
                            "redirect": None,
                            "subdirectory": None,
                            "tag": None,
                        },
                        "secondary": (
                            "list",
                            {
                                0: {
                                    "id": None,
                                    "cmsLocaleId": None,
                                    "enabled": None,
                                    "displayName": None,
                                    "redirect": None,
                                    "subdirectory": None,
                                    "tag": None,
                                }
                            },
                        ),
                    },
                    "dataCollectionEnabled": None,
                    "dataCollectionType": None,
                },
            },
        )
    }
    response = client.sites.list()
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.sites.list()
    validate_response(async_response, expected_response, expected_types)


async def test_get(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "id": "42e98c9a982ac9b8b742",
        "workspaceId": "42e63e98c9a982ac9b8b742",
        "createdOn": "1979-10-12T12:00:00Z",
        "displayName": "The Hitchhiker's Guide to the Galaxy",
        "shortName": "hitchhikers-guide",
        "lastPublished": "2023-04-02T12:42:00Z",
        "lastUpdated": "2023-04-02T12:42:00Z",
        "previewUrl": "https://screenshots.webflow.com/sites/6258612d1ee792848f805dcf/20231219211811_d5990556c743f33b7071300a03bf67e6.png",
        "timeZone": "Magrathea/FactoryFloor",
        "parentFolderId": "1as2d3f4g5h6j7k8l9z0x1c2v3b4n5m6",
        "customDomains": [
            {
                "id": "589a331aa51e760df7ccb89d",
                "url": "hitchhikersguide.galaxy",
                "lastPublished": "2022-12-07T16:51:37Z",
            },
            {"id": "589a331aa51e760df7ccb89e", "url": "heartofgold.spaceship", "lastPublished": "2022-12-07T16:51:37Z"},
        ],
        "locales": {
            "primary": {
                "id": "653fd9af6a07fc9cfd7a5e57",
                "cmsLocaleId": "653ad57de882f528b32e810e",
                "enabled": False,
                "displayName": "English (United States)",
                "displayImageId": "displayImageId",
                "redirect": True,
                "subdirectory": "",
                "tag": "en-US",
            },
            "secondary": [
                {
                    "id": "653fd9af6a07fc9cfd7a5e57",
                    "cmsLocaleId": "653ad57de882f528b32e810e",
                    "enabled": False,
                    "displayName": "English (United States)",
                    "redirect": True,
                    "subdirectory": "",
                    "tag": "en-US",
                }
            ],
        },
        "dataCollectionEnabled": True,
        "dataCollectionType": "always",
    }
    expected_types: typing.Any = {
        "id": None,
        "workspaceId": None,
        "createdOn": "datetime",
        "displayName": None,
        "shortName": None,
        "lastPublished": "datetime",
        "lastUpdated": "datetime",
        "previewUrl": None,
        "timeZone": None,
        "parentFolderId": None,
        "customDomains": (
            "list",
            {
                0: {"id": None, "url": None, "lastPublished": "datetime"},
                1: {"id": None, "url": None, "lastPublished": "datetime"},
            },
        ),
        "locales": {
            "primary": {
                "id": None,
                "cmsLocaleId": None,
                "enabled": None,
                "displayName": None,
                "displayImageId": None,
                "redirect": None,
                "subdirectory": None,
                "tag": None,
            },
            "secondary": (
                "list",
                {
                    0: {
                        "id": None,
                        "cmsLocaleId": None,
                        "enabled": None,
                        "displayName": None,
                        "redirect": None,
                        "subdirectory": None,
                        "tag": None,
                    }
                },
            ),
        },
        "dataCollectionEnabled": None,
        "dataCollectionType": None,
    }
    response = client.sites.get(site_id="580e63e98c9a982ac9b8b741")
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.sites.get(site_id="580e63e98c9a982ac9b8b741")
    validate_response(async_response, expected_response, expected_types)


async def test_delete(client: Webflow, async_client: AsyncWebflow) -> None:
    # Type ignore to avoid mypy complaining about the function not being meant to return a value
    assert (
        client.sites.delete(site_id="580e63e98c9a982ac9b8b741")  # type: ignore[func-returns-value]
        is None
    )

    assert (
        await async_client.sites.delete(site_id="580e63e98c9a982ac9b8b741")  # type: ignore[func-returns-value]
        is None
    )


async def test_update(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "id": "42e98c9a982ac9b8b742",
        "workspaceId": "42e63e98c9a982ac9b8b742",
        "createdOn": "1979-10-12T12:00:00Z",
        "displayName": "The Hitchhiker's Guide to the Galaxy",
        "shortName": "hitchhikers-guide",
        "lastPublished": "2023-04-02T12:42:00Z",
        "lastUpdated": "2023-04-02T12:42:00Z",
        "previewUrl": "https://screenshots.webflow.com/sites/6258612d1ee792848f805dcf/20231219211811_d5990556c743f33b7071300a03bf67e6.png",
        "timeZone": "Magrathea/FactoryFloor",
        "parentFolderId": "1as2d3f4g5h6j7k8l9z0x1c2v3b4n5m6",
        "customDomains": [
            {
                "id": "589a331aa51e760df7ccb89d",
                "url": "hitchhikersguide.galaxy",
                "lastPublished": "2022-12-07T16:51:37Z",
            },
            {"id": "589a331aa51e760df7ccb89e", "url": "heartofgold.spaceship", "lastPublished": "2022-12-07T16:51:37Z"},
        ],
        "locales": {
            "primary": {
                "id": "653fd9af6a07fc9cfd7a5e57",
                "cmsLocaleId": "653ad57de882f528b32e810e",
                "enabled": False,
                "displayName": "English (United States)",
                "displayImageId": "displayImageId",
                "redirect": True,
                "subdirectory": "",
                "tag": "en-US",
            },
            "secondary": [
                {
                    "id": "653fd9af6a07fc9cfd7a5e57",
                    "cmsLocaleId": "653ad57de882f528b32e810e",
                    "enabled": False,
                    "displayName": "English (United States)",
                    "redirect": True,
                    "subdirectory": "",
                    "tag": "en-US",
                }
            ],
        },
        "dataCollectionEnabled": True,
        "dataCollectionType": "always",
    }
    expected_types: typing.Any = {
        "id": None,
        "workspaceId": None,
        "createdOn": "datetime",
        "displayName": None,
        "shortName": None,
        "lastPublished": "datetime",
        "lastUpdated": "datetime",
        "previewUrl": None,
        "timeZone": None,
        "parentFolderId": None,
        "customDomains": (
            "list",
            {
                0: {"id": None, "url": None, "lastPublished": "datetime"},
                1: {"id": None, "url": None, "lastPublished": "datetime"},
            },
        ),
        "locales": {
            "primary": {
                "id": None,
                "cmsLocaleId": None,
                "enabled": None,
                "displayName": None,
                "displayImageId": None,
                "redirect": None,
                "subdirectory": None,
                "tag": None,
            },
            "secondary": (
                "list",
                {
                    0: {
                        "id": None,
                        "cmsLocaleId": None,
                        "enabled": None,
                        "displayName": None,
                        "redirect": None,
                        "subdirectory": None,
                        "tag": None,
                    }
                },
            ),
        },
        "dataCollectionEnabled": None,
        "dataCollectionType": None,
    }
    response = client.sites.update(site_id="580e63e98c9a982ac9b8b741")
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.sites.update(site_id="580e63e98c9a982ac9b8b741")
    validate_response(async_response, expected_response, expected_types)


async def test_get_custom_domain(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "customDomains": [
            {
                "id": "589a331aa51e760df7ccb89d",
                "url": "hitchhikersguide.galaxy",
                "lastPublished": "2022-12-07T16:51:37Z",
            },
            {"id": "589a331aa51e760df7ccb89e", "url": "heartofgold.spaceship", "lastPublished": "2022-12-07T16:51:37Z"},
        ]
    }
    expected_types: typing.Any = {
        "customDomains": (
            "list",
            {
                0: {"id": None, "url": None, "lastPublished": "datetime"},
                1: {"id": None, "url": None, "lastPublished": "datetime"},
            },
        )
    }
    response = client.sites.get_custom_domain(site_id="580e63e98c9a982ac9b8b741")
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.sites.get_custom_domain(site_id="580e63e98c9a982ac9b8b741")
    validate_response(async_response, expected_response, expected_types)


async def test_publish(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "customDomains": [
            {"id": "589a331aa51e760df7ccb89d", "url": "test-api-domain.com", "lastPublished": "2022-12-07T16:51:37Z"}
        ],
        "publishToWebflowSubdomain": True,
    }
    expected_types: typing.Any = {
        "customDomains": ("list", {0: {"id": None, "url": None, "lastPublished": "datetime"}}),
        "publishToWebflowSubdomain": None,
    }
    response = client.sites.publish(site_id="580e63e98c9a982ac9b8b741")
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.sites.publish(site_id="580e63e98c9a982ac9b8b741")
    validate_response(async_response, expected_response, expected_types)
