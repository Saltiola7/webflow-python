# This file was auto-generated by Fern from our API Definition.

from webflow import Webflow
from webflow import AsyncWebflow
import typing
from .utilities import validate_response


async def test_list_(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "forms": [
            {
                "displayName": "Email Form",
                "createdOn": "2016-10-24T19:41:29Z",
                "lastUpdated": "2016-10-24T19:43:17Z",
                "fields": {
                    "0": {"displayName": "Email", "userVisible": True},
                    "1": {"displayName": "Email", "userVisible": True},
                },
                "responseSettings": {
                    "redirectUrl": "https://example.com",
                    "redirectMethod": "GET",
                    "sendEmailConfirmation": True,
                },
                "id": "589a331aa51e760df7ccb89e",
                "siteId": "580e63e98c9a982ac9b8b741",
                "siteDomainId": "6419db964a9c436a4baf6248",
                "pageId": "6419db964a9c43f6a3af6348",
                "pageName": "Home",
                "formElementId": "4e038d2c-6a1e-4953-7be9-a59a2b453177",
                "workspaceId": "580e63fc8c9a982ac9b8b744",
            },
            {
                "displayName": "Name Form",
                "createdOn": "2016-10-24T19:41:29Z",
                "lastUpdated": "2016-10-24T19:43:17Z",
                "fields": {"0": {"displayName": "Email", "userVisible": True}},
                "responseSettings": {
                    "redirectUrl": "https://example.com",
                    "redirectMethod": "GET",
                    "sendEmailConfirmation": False,
                },
                "id": "580ff8d7ba3e45ba9fe588e9",
                "siteId": "580e63e98c9a982ac9b8b741",
                "siteDomainId": "6419db964a9c436a4baf6248",
                "pageId": "6419db964a9c43f6a3af6348",
                "pageName": "Home",
                "formElementId": "4e038d2c-6a1e-4953-7be9-a59a2b453177",
                "workspaceId": "580e63fc8c9a982ac9b8b744",
            },
        ],
        "pagination": {"limit": 25, "offset": 0, "total": 2},
    }
    expected_types: typing.Any = {
        "forms": (
            "list",
            {
                0: {
                    "displayName": None,
                    "createdOn": "datetime",
                    "lastUpdated": "datetime",
                    "fields": (
                        "dict",
                        {
                            0: (None, {"displayName": None, "userVisible": None}),
                            1: (None, {"displayName": None, "userVisible": None}),
                        },
                    ),
                    "responseSettings": {"redirectUrl": None, "redirectMethod": None, "sendEmailConfirmation": None},
                    "id": None,
                    "siteId": None,
                    "siteDomainId": None,
                    "pageId": None,
                    "pageName": None,
                    "formElementId": None,
                    "workspaceId": None,
                },
                1: {
                    "displayName": None,
                    "createdOn": "datetime",
                    "lastUpdated": "datetime",
                    "fields": ("dict", {0: (None, {"displayName": None, "userVisible": None})}),
                    "responseSettings": {"redirectUrl": None, "redirectMethod": None, "sendEmailConfirmation": None},
                    "id": None,
                    "siteId": None,
                    "siteDomainId": None,
                    "pageId": None,
                    "pageName": None,
                    "formElementId": None,
                    "workspaceId": None,
                },
            },
        ),
        "pagination": {"limit": None, "offset": None, "total": None},
    }
    response = client.forms.list(site_id="580e63e98c9a982ac9b8b741")
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.forms.list(site_id="580e63e98c9a982ac9b8b741")
    validate_response(async_response, expected_response, expected_types)


async def test_get(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "displayName": "Email Form",
        "createdOn": "2016-10-24T19:41:29Z",
        "lastUpdated": "2016-10-24T19:43:17Z",
        "fields": {
            "660d5bcc9c0772150459dfb1": {
                "displayName": "Name",
                "type": "Plain",
                "placeholder": "Enter your email",
                "userVisible": True,
            },
            "589a331aa51e760df7ccb89d": {
                "displayName": "Email",
                "type": "Email",
                "placeholder": "Enter your email",
                "userVisible": True,
            },
        },
        "responseSettings": {
            "redirectUrl": "https://example.com",
            "redirectMethod": "GET",
            "redirectAction": "POST https://example.com",
            "sendEmailConfirmation": True,
        },
        "id": "589a331aa51e760df7ccb89e",
        "siteId": "580e63e98c9a982ac9b8b741",
        "siteDomainId": "6419db964a9c436a4baf6248",
        "pageId": "6419db964a9c43f6a3af6348",
        "pageName": "Home",
        "formElementId": "4e038d2c-6a1e-4953-7be9-a59a2b453177",
        "workspaceId": "580e63fc8c9a982ac9b8b744",
    }
    expected_types: typing.Any = {
        "displayName": None,
        "createdOn": "datetime",
        "lastUpdated": "datetime",
        "fields": (
            "dict",
            {
                0: (None, {"displayName": None, "type": None, "placeholder": None, "userVisible": None}),
                1: (None, {"displayName": None, "type": None, "placeholder": None, "userVisible": None}),
            },
        ),
        "responseSettings": {
            "redirectUrl": None,
            "redirectMethod": None,
            "redirectAction": None,
            "sendEmailConfirmation": None,
        },
        "id": None,
        "siteId": None,
        "siteDomainId": None,
        "pageId": None,
        "pageName": None,
        "formElementId": None,
        "workspaceId": None,
    }
    response = client.forms.get(form_id="580e63e98c9a982ac9b8b741")
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.forms.get(form_id="580e63e98c9a982ac9b8b741")
    validate_response(async_response, expected_response, expected_types)


async def test_list_submissions(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "formSubmissions": [
            {
                "id": "6321ca84df3949bfc6752327",
                "displayName": "Sample Form",
                "siteId": "62749158efef318abc8d5a0f",
                "workspaceId": "62749158efef318abc8d5a0f",
                "dateSubmitted": "2022-09-14T12:35:16Z",
                "formResponse": {"First Name": "Arthur", "Last Name": "Dent"},
            },
            {
                "id": "660d64fabf6e0a0d4edab981",
                "displayName": "Sample Form",
                "siteId": "62749158efef318abc8d5a0f",
                "workspaceId": "62749158efef318abc8d5a0f",
                "dateSubmitted": "2022-09-14T12:35:16Z",
                "formResponse": {"First Name": "Ford", "Last Name": "Prefect"},
            },
        ],
        "pagination": {"limit": 25, "offset": 0, "total": 2},
    }
    expected_types: typing.Any = {
        "formSubmissions": (
            "list",
            {
                0: {
                    "id": None,
                    "displayName": None,
                    "siteId": None,
                    "workspaceId": None,
                    "dateSubmitted": "datetime",
                    "formResponse": ("dict", {0: (None, None), 1: (None, None)}),
                },
                1: {
                    "id": None,
                    "displayName": None,
                    "siteId": None,
                    "workspaceId": None,
                    "dateSubmitted": "datetime",
                    "formResponse": ("dict", {0: (None, None), 1: (None, None)}),
                },
            },
        ),
        "pagination": {"limit": None, "offset": None, "total": None},
    }
    response = client.forms.list_submissions(form_id="580e63e98c9a982ac9b8b741")
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.forms.list_submissions(form_id="580e63e98c9a982ac9b8b741")
    validate_response(async_response, expected_response, expected_types)


async def test_get_submission(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "id": "6321ca84df3949bfc6752327",
        "displayName": "Sample Form",
        "siteId": "62749158efef318abc8d5a0f",
        "workspaceId": "62749158efef318abc8d5a0f",
        "dateSubmitted": "2022-09-14T12:35:16Z",
        "formResponse": {"First Name": "Arthur", "Last Name": "Dent"},
    }
    expected_types: typing.Any = {
        "id": None,
        "displayName": None,
        "siteId": None,
        "workspaceId": None,
        "dateSubmitted": "datetime",
        "formResponse": ("dict", {0: (None, None), 1: (None, None)}),
    }
    response = client.forms.get_submission(form_submission_id="580e63e98c9a982ac9b8b741")
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.forms.get_submission(form_submission_id="580e63e98c9a982ac9b8b741")
    validate_response(async_response, expected_response, expected_types)


async def test_update_submission(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "id": "6321ca84df3949bfc6752327",
        "displayName": "Sample Form",
        "siteId": "62749158efef318abc8d5a0f",
        "workspaceId": "62749158efef318abc8d5a0f",
        "dateSubmitted": "2022-09-14T12:35:16Z",
        "formResponse": {"First Name": "Arthur", "Last Name": "Dent"},
    }
    expected_types: typing.Any = {
        "id": None,
        "displayName": None,
        "siteId": None,
        "workspaceId": None,
        "dateSubmitted": "datetime",
        "formResponse": ("dict", {0: (None, None), 1: (None, None)}),
    }
    response = client.forms.update_submission(form_submission_id="580e63e98c9a982ac9b8b741")
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.forms.update_submission(form_submission_id="580e63e98c9a982ac9b8b741")
    validate_response(async_response, expected_response, expected_types)
