# This file was auto-generated by Fern from our API Definition.

from webflow import Webflow
from webflow import AsyncWebflow
import typing
from .utilities import validate_response


async def test_list_(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "registeredScripts": [
            {
                "id": "alert",
                "canCopy": False,
                "displayName": "Alert",
                "hostedLocation": "https://cdn.webflow.io/.../alert-0.0.1.js",
                "integrityHash": "integrityHash",
                "createdOn": "2022-10-26T00:28:54.191Z",
                "lastUpdated": "lastUpdated",
                "version": "0.0.1",
            },
            {
                "id": "alert",
                "canCopy": False,
                "displayName": "Alert",
                "hostedLocation": "https://cdn.webflow.io/.../alert-0.0.2.js",
                "integrityHash": "integrityHash",
                "createdOn": "2022-10-26T00:28:54.191Z",
                "lastUpdated": "lastUpdated",
                "version": "0.0.2",
            },
            {
                "id": "cms_slider",
                "canCopy": True,
                "displayName": "CMS Slider",
                "hostedLocation": "https://cdn.jsdelivr.net/.../cms_slider.js",
                "integrityHash": "sha384-J+YlJ8v0gpaRoKH7SbFbEmxOZlAxLiwNjfSsBhDooGa5roXlPPpXbEevck4J7YZ+",
                "createdOn": "2022-10-26T00:28:54.191Z",
                "lastUpdated": "lastUpdated",
                "version": "1.0.0",
            },
        ]
    }
    expected_types: typing.Any = {
        "registeredScripts": (
            "list",
            {
                0: {
                    "id": None,
                    "canCopy": None,
                    "displayName": None,
                    "hostedLocation": None,
                    "integrityHash": None,
                    "createdOn": None,
                    "lastUpdated": None,
                    "version": None,
                },
                1: {
                    "id": None,
                    "canCopy": None,
                    "displayName": None,
                    "hostedLocation": None,
                    "integrityHash": None,
                    "createdOn": None,
                    "lastUpdated": None,
                    "version": None,
                },
                2: {
                    "id": None,
                    "canCopy": None,
                    "displayName": None,
                    "hostedLocation": None,
                    "integrityHash": None,
                    "createdOn": None,
                    "lastUpdated": None,
                    "version": None,
                },
            },
        )
    }
    response = client.scripts.list(site_id="580e63e98c9a982ac9b8b741")
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.scripts.list(site_id="580e63e98c9a982ac9b8b741")
    validate_response(async_response, expected_response, expected_types)


async def test_register_hosted(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "id": "cms_slider",
        "canCopy": True,
        "displayName": "CMS Slider",
        "hostedLocation": "https://cdn.jsdelivr.net/.../cmsslider.js",
        "integrityHash": "sha384-J+YlJ8v0gpaRoKH7SbFbEmxOZlAxLiwNjfSsBhDooGa5roXlPPpXbEevck4J7YZ+",
        "createdOn": "2022-10-26T00:28:54.191Z",
        "lastUpdated": "lastUpdated",
        "version": "1.0.0",
    }
    expected_types: typing.Any = {
        "id": None,
        "canCopy": None,
        "displayName": None,
        "hostedLocation": None,
        "integrityHash": None,
        "createdOn": None,
        "lastUpdated": None,
        "version": None,
    }
    response = client.scripts.register_hosted(
        site_id="580e63e98c9a982ac9b8b741",
        hosted_location="hostedLocation",
        integrity_hash="integrityHash",
        version="version",
        display_name="displayName",
    )
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.scripts.register_hosted(
        site_id="580e63e98c9a982ac9b8b741",
        hosted_location="hostedLocation",
        integrity_hash="integrityHash",
        version="version",
        display_name="displayName",
    )
    validate_response(async_response, expected_response, expected_types)


async def test_register_inline(client: Webflow, async_client: AsyncWebflow) -> None:
    expected_response: typing.Any = {
        "id": "alert",
        "canCopy": False,
        "displayName": "Alert",
        "hostedLocation": "https://uploads-ssl.webflow.com/6258612d1ee792848f805dcf%2F64b6c769ff52ba6c3d904a91%2F660d6e15b3d1696f2d2b1447%2Falert-0.0.1.js",
        "integrityHash": "integrityHash",
        "createdOn": "2022-10-26T00:28:54.191Z",
        "lastUpdated": "lastUpdated",
        "version": "0.0.1",
    }
    expected_types: typing.Any = {
        "id": None,
        "canCopy": None,
        "displayName": None,
        "hostedLocation": None,
        "integrityHash": None,
        "createdOn": None,
        "lastUpdated": None,
        "version": None,
    }
    response = client.scripts.register_inline(
        site_id="580e63e98c9a982ac9b8b741", source_code="alert('hello world');", version="0.0.1", display_name="Alert"
    )
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.scripts.register_inline(
        site_id="580e63e98c9a982ac9b8b741", source_code="alert('hello world');", version="0.0.1", display_name="Alert"
    )
    validate_response(async_response, expected_response, expected_types)
